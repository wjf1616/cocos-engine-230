
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/canvas/renderers/graphics/impl.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var Helper = require('../../../../graphics/helper');

var Types = require('../../../../graphics/types');

var js = require('../../../../platform/js');

var LineJoin = Types.LineJoin;
var LineCap = Types.LineCap;

function Impl() {
  this.cmds = [];
  this.style = {
    strokeStyle: 'black',
    fillStyle: 'white',
    lineCap: 'butt',
    lineJoin: 'miter',
    miterLimit: 10
  };
}

var _proto = Impl.prototype;
js.mixin(_proto, {
  moveTo: function moveTo(x, y) {
    this.cmds.push(['moveTo', [x, y]]);
  },
  lineTo: function lineTo(x, y) {
    this.cmds.push(['lineTo', [x, y]]);
  },
  bezierCurveTo: function bezierCurveTo(c1x, c1y, c2x, c2y, x, y) {
    this.cmds.push(['bezierCurveTo', [c1x, c1y, c2x, c2y, x, y]]);
  },
  quadraticCurveTo: function quadraticCurveTo(cx, cy, x, y) {
    this.cmds.push(['quadraticCurveTo', [cx, cy, x, y]]);
  },
  arc: function arc(cx, cy, r, startAngle, endAngle, counterclockwise) {
    Helper.arc(this, cx, cy, r, startAngle, endAngle, counterclockwise);
  },
  ellipse: function ellipse(cx, cy, rx, ry) {
    Helper.ellipse(this, cx, cy, rx, ry);
  },
  circle: function circle(cx, cy, r) {
    Helper.ellipse(this, cx, cy, r, r);
  },
  rect: function rect(x, y, w, h) {
    this.moveTo(x, y);
    this.lineTo(x, y + h);
    this.lineTo(x + w, y + h);
    this.lineTo(x + w, y);
    this.close();
  },
  roundRect: function roundRect(x, y, w, h, r) {
    Helper.roundRect(this, x, y, w, h, r);
  },
  clear: function clear(comp, clean) {
    this.cmds.length = 0;
  },
  close: function close() {
    this.cmds.push(['closePath', []]);
  },
  stroke: function stroke() {
    this.cmds.push(['stroke', []]);
  },
  fill: function fill() {
    this.cmds.push(['fill', []]);
  }
});
js.set(_proto, 'strokeColor', function (v) {
  var strokeStyle = 'rgba(' + (0 | v.r) + ',' + (0 | v.g) + ',' + (0 | v.b) + ',' + v.a / 255 + ')';
  this.cmds.push(['strokeStyle', strokeStyle]);
  this.style.strokeStyle = strokeStyle;
});
js.set(_proto, 'fillColor', function (v) {
  var fillStyle = 'rgba(' + (0 | v.r) + ',' + (0 | v.g) + ',' + (0 | v.b) + ',' + v.a / 255 + ')';
  this.cmds.push(['fillStyle', fillStyle]);
  this.style.fillStyle = fillStyle;
});
js.set(_proto, 'lineWidth', function (v) {
  this.cmds.push(['lineWidth', v]);
  this.style.lineWidth = v;
});
js.set(_proto, 'lineCap', function (v) {
  var lineCap = 'butt';

  if (v === LineCap.BUTT) {
    lineCap = 'butt';
  } else if (v === LineCap.ROUND) {
    lineCap = 'round';
  } else if (v === LineCap.SQUARE) {
    lineCap = 'square';
  }

  this.cmds.push(['lineCap', lineCap]);
  this.style.lineCap = lineCap;
});
js.set(_proto, 'lineJoin', function (v) {
  var lineJoin = 'bevel';

  if (v === LineJoin.BEVEL) {
    lineJoin = 'bevel';
  } else if (v === LineJoin.ROUND) {
    lineJoin = 'round';
  } else if (v === LineJoin.MITER) {
    lineJoin = 'miter';
  }

  this.cmds.push(['lineJoin', lineJoin]);
  this.style.lineJoin = lineJoin;
});
js.set(_proto, 'miterLimit', function (v) {
  this.cmds.push(['miterLimit', v]);
  this.style.miterLimit = v;
});
cc.Graphics._Impl = Impl;
module.exports = Impl;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltcGwuanMiXSwibmFtZXMiOlsiSGVscGVyIiwicmVxdWlyZSIsIlR5cGVzIiwianMiLCJMaW5lSm9pbiIsIkxpbmVDYXAiLCJJbXBsIiwiY21kcyIsInN0eWxlIiwic3Ryb2tlU3R5bGUiLCJmaWxsU3R5bGUiLCJsaW5lQ2FwIiwibGluZUpvaW4iLCJtaXRlckxpbWl0IiwiX3Byb3RvIiwicHJvdG90eXBlIiwibWl4aW4iLCJtb3ZlVG8iLCJ4IiwieSIsInB1c2giLCJsaW5lVG8iLCJiZXppZXJDdXJ2ZVRvIiwiYzF4IiwiYzF5IiwiYzJ4IiwiYzJ5IiwicXVhZHJhdGljQ3VydmVUbyIsImN4IiwiY3kiLCJhcmMiLCJyIiwic3RhcnRBbmdsZSIsImVuZEFuZ2xlIiwiY291bnRlcmNsb2Nrd2lzZSIsImVsbGlwc2UiLCJyeCIsInJ5IiwiY2lyY2xlIiwicmVjdCIsInciLCJoIiwiY2xvc2UiLCJyb3VuZFJlY3QiLCJjbGVhciIsImNvbXAiLCJjbGVhbiIsImxlbmd0aCIsInN0cm9rZSIsImZpbGwiLCJzZXQiLCJ2IiwiZyIsImIiLCJhIiwibGluZVdpZHRoIiwiQlVUVCIsIlJPVU5EIiwiU1FVQVJFIiwiQkVWRUwiLCJNSVRFUiIsImNjIiwiR3JhcGhpY3MiLCJfSW1wbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBLElBQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLDZCQUFELENBQXRCOztBQUNBLElBQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLDRCQUFELENBQXJCOztBQUNBLElBQU1FLEVBQUUsR0FBR0YsT0FBTyxDQUFDLHlCQUFELENBQWxCOztBQUNBLElBQU1HLFFBQVEsR0FBR0YsS0FBSyxDQUFDRSxRQUF2QjtBQUNBLElBQU1DLE9BQU8sR0FBR0gsS0FBSyxDQUFDRyxPQUF0Qjs7QUFFQSxTQUFTQyxJQUFULEdBQWlCO0FBQ2IsT0FBS0MsSUFBTCxH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QUFLQVUsRUFBRSxDQUFDQyxRQUFILENBQVlDLEtBQVosR0FBb0J6RCxJQUFwQjtBQUNBMEQsTUFBTSxDQUFDQyxPQUFQLEdBQWlCM0QsSUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxOCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgSGVscGVyID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vZ3JhcGhpY3MvaGVscGVyJyk7XG5jb25zdCBUeXBlcyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL2dyYXBoaWNzL3R5cGVzJyk7XG5jb25zdCBqcyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL3BsYXRmb3JtL2pzJyk7XG5jb25zdCBMaW5lSm9pbiA9IFR5cGVzLkxpbmVKb2luO1xuY29uc3QgTGluZUNhcCA9IFR5cGVzLkxpbmVDYXA7XG5cbmZ1bmN0aW9uIEltcGwgKCkge1xuICAgIHRoaXMuY21kcyA9IFtdO1xuXG4gICAgdGhpcy5zdHlsZSA9IHtcbiAgICAgICAgc3Ryb2tlU3R5bGU6ICdibGFjaycsXG4gICAgICAgIGZpbGxTdHlsZTogJ3doaXRlJyxcbiAgICAgICAgbGluZUNhcDogJ2J1dHQnLFxuICAgICAgICBsaW5lSm9pbjogJ21pdGVyJyxcbiAgICAgICAgbWl0ZXJMaW1pdDogMTBcbiAgICB9O1xufVxuXG5sZXQgX3Byb3RvID0gSW1wbC5wcm90b3R5cGU7XG5cbmpzLm1peGluKF9wcm90bywge1xuICAgIG1vdmVUbyAoeCwgeSkge1xuICAgICAgICB0aGlzLmNtZHMucHVzaChbJ21vdmVUbycsIFt4LCB5XV0pO1xuICAgIH0sXG5cbiAgICBsaW5lVG8gKHgsIHkpIHtcbiAgICAgICAgdGhpcy5jbWRzLnB1c2goWydsaW5lVG8nLCBbeCwgeV1dKTtcbiAgICB9LFxuXG4gICAgYmV6aWVyQ3VydmVUbyAoYzF4LCBjMXksIGMyeCwgYzJ5LCB4LCB5KSB7XG4gICAgICAgIHRoaXMuY21kcy5wdXNoKFsnYmV6aWVyQ3VydmVUbycsIFtjMXgsIGMxeSwgYzJ4LCBjMnksIHgsIHldXSk7XG4gICAgfSxcblxuICAgIHF1YWRyYXRpY0N1cnZlVG8gKGN4LCBjeSwgeCwgeSkge1xuICAgICAgICB0aGlzLmNtZHMucHVzaChbJ3F1YWRyYXRpY0N1cnZlVG8nLCBbY3gsIGN5LCB4LCB5XV0pO1xuICAgIH0sXG5cbiAgICBhcmMgKGN4LCBjeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvdW50ZXJjbG9ja3dpc2UpIHtcbiAgICAgICAgSGVscGVyLmFyYyh0aGlzLCBjeCwgY3ksIHIsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBjb3VudGVyY2xvY2t3aXNlKTtcbiAgICB9LFxuXG4gICAgZWxsaXBzZSAoY3gsIGN5LCByeCwgcnkpIHtcbiAgICAgICAgSGVscGVyLmVsbGlwc2UodGhpcywgY3gsIGN5LCByeCwgcnkpO1xuICAgIH0sXG5cbiAgICBjaXJjbGUgKGN4LCBjeSwgcikge1xuICAgICAgICBIZWxwZXIuZWxsaXBzZSh0aGlzLCBjeCwgY3ksIHIsIHIpO1xuICAgIH0sXG5cbiAgICByZWN0ICh4LCB5LCB3LCBoKSB7XG4gICAgICAgIHRoaXMubW92ZVRvKHgsIHkpO1xuICAgICAgICB0aGlzLmxpbmVUbyh4LCB5ICsgaCk7XG4gICAgICAgIHRoaXMubGluZVRvKHggKyB3LCB5ICsgaCk7XG4gICAgICAgIHRoaXMubGluZVRvKHggKyB3LCB5KTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0sXG5cbiAgICByb3VuZFJlY3QgKHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgSGVscGVyLnJvdW5kUmVjdCh0aGlzLCB4LCB5LCB3LCBoLCByKTtcbiAgICB9LFxuXG4gICAgY2xlYXIgKGNvbXAsIGNsZWFuKSB7XG4gICAgICAgIHRoaXMuY21kcy5sZW5ndGggPSAwO1xuICAgIH0sXG5cbiAgICBjbG9zZSAoKSB7XG4gICAgICAgIHRoaXMuY21kcy5wdXNoKFsnY2xvc2VQYXRoJywgW11dKTtcbiAgICB9LFxuXG4gICAgc3Ryb2tlICgpIHtcbiAgICAgICAgdGhpcy5jbWRzLnB1c2goWydzdHJva2UnLCBbXV0pO1xuICAgIH0sXG5cbiAgICBmaWxsICgpIHtcbiAgICAgICAgdGhpcy5jbWRzLnB1c2goWydmaWxsJywgW11dKTtcbiAgICB9XG59KTtcblxuanMuc2V0KF9wcm90bywgJ3N0cm9rZUNvbG9yJywgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgc3Ryb2tlU3R5bGUgPSAncmdiYSgnICsgKDAgfCB2LnIpICsgJywnICsgKDAgfCB2LmcpICsgJywnICsgKDAgfCB2LmIpICsgJywnICsgdi5hIC8gMjU1ICsgJyknO1xuICAgIHRoaXMuY21kcy5wdXNoKFsnc3Ryb2tlU3R5bGUnLCBzdHJva2VTdHlsZV0pO1xuICAgIHRoaXMuc3R5bGUuc3Ryb2tlU3R5bGUgPSBzdHJva2VTdHlsZTtcbn0pO1xuXG5qcy5zZXQoX3Byb3RvLCAnZmlsbENvbG9yJywgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgZmlsbFN0eWxlID0gJ3JnYmEoJyArICgwIHwgdi5yKSArICcsJyArICgwIHwgdi5nKSArICcsJyArICgwIHwgdi5iKSArICcsJyArIHYuYSAvIDI1NSArICcpJztcbiAgICB0aGlzLmNtZHMucHVzaChbJ2ZpbGxTdHlsZScsIGZpbGxTdHlsZV0pO1xuICAgIHRoaXMuc3R5bGUuZmlsbFN0eWxlID0gZmlsbFN0eWxlO1xufSk7XG5cbmpzLnNldChfcHJvdG8sICdsaW5lV2lkdGgnLCBmdW5jdGlvbiAodikge1xuICAgIHRoaXMuY21kcy5wdXNoKFsnbGluZVdpZHRoJywgdl0pO1xuICAgIHRoaXMuc3R5bGUubGluZVdpZHRoID0gdjtcbn0pO1xuXG5cbmpzLnNldChfcHJvdG8sICdsaW5lQ2FwJywgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgbGluZUNhcCA9ICdidXR0JztcbiAgICBpZiAodiA9PT0gTGluZUNhcC5CVVRUKSB7XG4gICAgICAgIGxpbmVDYXAgPSAnYnV0dCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHYgPT09IExpbmVDYXAuUk9VTkQpIHtcbiAgICAgICAgbGluZUNhcCA9ICdyb3VuZCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHYgPT09IExpbmVDYXAuU1FVQVJFKSB7XG4gICAgICAgIGxpbmVDYXAgPSAnc3F1YXJlJztcbiAgICB9XG4gICAgdGhpcy5jbWRzLnB1c2goWydsaW5lQ2FwJywgbGluZUNhcF0pO1xuICAgIHRoaXMuc3R5bGUubGluZUNhcCA9IGxpbmVDYXA7XG59KTtcblxuanMuc2V0KF9wcm90bywgJ2xpbmVKb2luJywgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgbGluZUpvaW4gPSAnYmV2ZWwnO1xuICAgIGlmICh2ID09PSBMaW5lSm9pbi5CRVZFTCkge1xuICAgICAgICBsaW5lSm9pbiA9ICdiZXZlbCc7XG4gICAgfVxuICAgIGVsc2UgaWYgKHYgPT09IExpbmVKb2luLlJPVU5EKSB7XG4gICAgICAgIGxpbmVKb2luID0gJ3JvdW5kJztcbiAgICB9XG4gICAgZWxzZSBpZiAodiA9PT0gTGluZUpvaW4uTUlURVIpIHtcbiAgICAgICAgbGluZUpvaW4gPSAnbWl0ZXInO1xuICAgIH1cblxuICAgIHRoaXMuY21kcy5wdXNoKFsnbGluZUpvaW4nLCBsaW5lSm9pbl0pO1xuICAgIHRoaXMuc3R5bGUubGluZUpvaW4gPSBsaW5lSm9pbjtcbn0pO1xuXG5qcy5zZXQoX3Byb3RvLCAnbWl0ZXJMaW1pdCcsIGZ1bmN0aW9uICh2KSB7XG4gICAgdGhpcy5jbWRzLnB1c2goWydtaXRlckxpbWl0Jywgdl0pO1xuICAgIHRoaXMuc3R5bGUubWl0ZXJMaW1pdCA9IHY7XG59KTtcblxuY2MuR3JhcGhpY3MuX0ltcGwgPSBJbXBsO1xubW9kdWxlLmV4cG9ydHMgPSBJbXBsO1xuIl19