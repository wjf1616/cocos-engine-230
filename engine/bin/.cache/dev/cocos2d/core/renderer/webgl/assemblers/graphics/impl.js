
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/renderer/webgl/assemblers/graphics/impl.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var Helper = require('../../../../graphics/helper');

var PointFlags = require('../../../../graphics/types').PointFlags;

var Point = cc.Graphics.Point = cc.Class({
  name: 'cc.GraphicsPoint',
  "extends": cc.Vec2,
  ctor: function ctor(x, y) {
    this.reset();
  },
  reset: function reset() {
    this.dx = 0;
    this.dy = 0;
    this.dmx = 0;
    this.dmy = 0;
    this.flags = 0;
    this.len = 0;
  }
});

function Path() {
  this.reset();
}

cc.js.mixin(Path.prototype, {
  reset: function reset() {
    this.closed = false;
    this.nbevel = 0;
    this.complex = true;

    if (this.points) {
      this.points.length = 0;
    } else {
      this.points = [];
    }
  }
});

function Impl(graphics) {
  // inner properties
  this._tessTol = 0.25;
  this._distTol = 0.01;
  this._updatePathOffset = false;
  this._paths = null;
  this._pathLength = 0;
  this._pathOffset = 0;
  this._points = null;
  this._pointsOffset = 0;
  this._commandx = 0;
  this._commandy = 0;
  this._paths = [];
  this._points = [];
}

cc.js.mixin(Impl.prototype, {
  moveTo: function moveTo(x, y) {
    if (this._updatePathOffset) {
      this._pathOffset = this._pathLength;
      this._updatePathOffset = false;
    }

    this._addPath();

    this._addPoint(x, y, PointFlags.PT_CORNER);

    this._commandx = x;
    this._commandy = y;
  },
  lineTo: function lineTo(x, y) {
    this._addPoint(x, y, PointFlags.PT_CORNER);

    this._commandx = x;
    this._commandy = y;
  },
  bezierCurveTo: function bezierCurveTo(c1x, c1y, c2x, c2y, x, y) {
    var path = this._curPath;
    var last = path.points[path.points.length - 1];

    if (last.x === c1x && last.y === c1y && c2x === x && c2y === y) {
      this.lineTo(x, y);
      return;
    }

    Helper.tesselateBezier(this, last.x, last.y, c1x, c1y, c2x, c2y, x, y, 0, PointFlags.PT_CORNER);
    this._commandx = x;
    this._commandy = y;
  },
  quadraticCurveTo: function quadraticCurveTo(cx, cy, x, y) {
    var x0 = this._commandx;
    var y0 = this._commandy;
    this.bezierCurveTo(x0 + 2.0 / 3.0 * (cx - x0), y0 + 2.0 / 3.0 * (cy - y0), x + 2.0 / 3.0 * (cx - x), y + 2.0 / 3.0 * (cy - y), x, y);
  },
  arc: function arc(cx, cy, r, startAngle, endAngle, counterclockwise) {
    Helper.arc(this, cx, cy, r, startAngle, endAngle, counterclockwise);
  },
  ellipse: function ellipse(cx, cy, rx, ry) {
    Helper.ellipse(this, cx, cy, rx, ry);
    this._curPath.complex = false;
  },
  circle: function circle(cx, cy, r) {
    Helper.ellipse(this, cx, cy, r, r);
    this._curPath.complex = false;
  },
  rect: function rect(x, y, w, h) {
    this.moveTo(x, y);
    this.lineTo(x, y + h);
    this.lineTo(x + w, y + h);
    this.lineTo(x + w, y);
    this.close();
    this._curPath.complex = false;
  },
  roundRect: function roundRect(x, y, w, h, r) {
    Helper.roundRect(this, x, y, w, h, r);
    this._curPath.complex = false;
  },
  clear: function clear(clean) {
    this._pathLength = 0;
    this._pathOffset = 0;
    this._pointsOffset = 0;
    this._curPath = null;

    if (clean) {
      this._paths.length = 0;
      this._points.length = 0;
    }
  },
  close: function close() {
    this._curPath.closed = true;
  },
  _addPath: function _addPath() {
    var offset = this._pathLength;
    var path = this._paths[offset];

    if (!path) {
      path = new Path();

      this._paths.push(path);
    } else {
      path.reset();
    }

    this._pathLength++;
    this._curPath = path;
    return path;
  },
  _addPoint: function _addPoint(x, y, flags) {
    var path = this._curPath;
    if (!path) return;
    var pt;
    var points = this._points;
    var pathPoints = path.points;
    var offset = this._pointsOffset++;
    pt = points[offset];

    if (!pt) {
      pt = new Point(x, y);
      points.push(pt);
    } else {
      pt.x = x;
      pt.y = y;
    }

    pt.flags = flags;
    pathPoints.push(pt);
  }
});
cc.Graphics._Impl = Impl;
module.exports = Impl;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltcGwuanMiXSwibmFtZXMiOlsiSGVscGVyIiwicmVxdWlyZSIsIlBvaW50RmxhZ3MiLCJQb2ludCIsImNjIiwiR3JhcGhpY3MiLCJDbGFzcyIsIm5hbWUiLCJWZWMyIiwiY3RvciIsIngiLCJ5IiwicmVzZXQiLCJkeCIsImR5IiwiZG14IiwiZG15IiwiZmxhZ3MiLCJsZW4iLCJQYXRoIiwianMiLCJtaXhpbiIsInByb3RvdHlwZSIsImNsb3NlZCIsIm5iZXZlbCIsImNvbXBsZXgiLCJwb2ludHMiLCJsZW5ndGgiLCJJbXBsIiwiZ3JhcGhpY3MiLCJfdGVzc1RvbCIsIl9kaXN0VG9sIiwiX3VwZGF0ZVBhdGhPZmZzZXQiLCJfcGF0aHMiLCJfcGF0aExlbmd0aCIsIl9wYXRoT2Zmc2V0IiwiX3BvaW50cyIsIl9wb2ludHNPZmZzZXQiLCJfY29tbWFuZHgiLCJfY29tbWFuZHkiLCJtb3ZlVG8iLCJfYWRkUGF0aCIsIl9hZGRQb2ludCIsIlBUX0NPUk5FUiIsImxpbmVUbyIsImJlemllckN1cnZlVG8iLCJjMXgiLCJjMXkiLCJjMngiLCJjMnkiLCJwYXRoIiwiX2N1clBhdGgiLCJsYXN0IiwidGVzc2VsYXRlQmV6aWVyIiwicXVhZHJhdGljQ3VydmVUbyIsImN4IiwiY3kiLCJ4MCIsInkwIiwiYXJjIiwiciIsInN0YXJ0QW5nbGUiLCJlbmRBbmdsZSIsImNvdW50ZXJjbG9ja3dpc2UiLCJlbGxpcHNlIiwicngiLCJyeSIsImNpcmNsZSIsInJlY3QiLCJ3IiwiaCIsImNsb3NlIiwicm91bmRSZWN0IiwiY2xlYXIiLCJjbGVhbiIsIm9mZnNldCIsInB1c2giLCJwdCIsInBhdGhQb2ludHMiLCJfSW1wbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBLElBQU1BLE1BQU0sR0FBR0MsT0FBTyxDQUFDLDZCQUFELENBQXRCOztBQUNBLElBQU1DLFVBQVUsR0FBR0QsT0FB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QUNsRSxDQUFILEdBQU9BLENBQVA7QUFDSDs7QUFFRGtFLElBQUFBLEVBQUUsQ0FBQzVELEtBQUgsR0FBV0EsS0FBWDtBQUNBNkQsSUFBQUEsVUFBVSxDQUFDRixJQUFYLENBQWdCQyxFQUFoQjtBQUNIO0FBOUh1QixDQUE1QjtBQWtJQXpFLEVBQUUsQ0FBQ0MsUUFBSCxDQUFZMEUsS0FBWixHQUFvQm5ELElBQXBCO0FBQ0FvRCxNQUFNLENBQUNDLE9BQVAsR0FBaUJyRCxJQUFqQiIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXG5cbiBodHRwczovL3d3dy5jb2Nvcy5jb20vXG5cbiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XG4gb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBlbmdpbmUgc291cmNlIGNvZGUgKHRoZSBcIlNvZnR3YXJlXCIpLCBhIGxpbWl0ZWQsXG4gd29ybGR3aWRlLCByb3lhbHR5LWZyZWUsIG5vbi1hc3NpZ25hYmxlLCByZXZvY2FibGUgYW5kIG5vbi1leGNsdXNpdmUgbGljZW5zZVxuIHRvIHVzZSBDb2NvcyBDcmVhdG9yIHNvbGVseSB0byBkZXZlbG9wIGdhbWVzIG9uIHlvdXIgdGFyZ2V0IHBsYXRmb3Jtcy4gWW91IHNoYWxsXG4gbm90IHVzZSBDb2NvcyBDcmVhdG9yIHNvZnR3YXJlIGZvciBkZXZlbG9waW5nIG90aGVyIHNvZnR3YXJlIG9yIHRvb2xzIHRoYXQnc1xuIHVzZWQgZm9yIGRldmVsb3BpbmcgZ2FtZXMuIFlvdSBhcmUgbm90IGdyYW50ZWQgdG8gcHVibGlzaCwgZGlzdHJpYnV0ZSxcbiBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXMgb2YgQ29jb3MgQ3JlYXRvci5cblxuIFRoZSBzb2Z0d2FyZSBvciB0b29scyBpbiB0aGlzIExpY2Vuc2UgQWdyZWVtZW50IGFyZSBsaWNlbnNlZCwgbm90IHNvbGQuXG4gWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuIHJlc2VydmVzIGFsbCByaWdodHMgbm90IGV4cHJlc3NseSBncmFudGVkIHRvIHlvdS5cblxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gVEhFIFNPRlRXQVJFLlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNvbnN0IEhlbHBlciA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL2dyYXBoaWNzL2hlbHBlcicpO1xuY29uc3QgUG9pbnRGbGFncyA9IHJlcXVpcmUoJy4uLy4uLy4uLy4uL2dyYXBoaWNzL3R5cGVzJykuUG9pbnRGbGFncztcblxubGV0IFBvaW50ID0gY2MuR3JhcGhpY3MuUG9pbnQgPSBjYy5DbGFzcyh7XG4gICAgbmFtZTogJ2NjLkdyYXBoaWNzUG9pbnQnLFxuICAgIGV4dGVuZHM6IGNjLlZlYzIsXG5cbiAgICBjdG9yICh4LCB5KSB7XG4gICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICB9LFxuICAgIFxuICAgIHJlc2V0ICgpIHtcbiAgICAgICAgdGhpcy5keCA9IDA7XG4gICAgICAgIHRoaXMuZHkgPSAwO1xuICAgICAgICB0aGlzLmRteCA9IDA7XG4gICAgICAgIHRoaXMuZG15ID0gMDtcbiAgICAgICAgdGhpcy5mbGFncyA9IDA7XG4gICAgICAgIHRoaXMubGVuID0gMDtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gUGF0aCAoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xufVxuXG5jYy5qcy5taXhpbihQYXRoLnByb3RvdHlwZSwge1xuICAgIHJlc2V0ICgpIHtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5uYmV2ZWwgPSAwO1xuICAgICAgICB0aGlzLmNvbXBsZXggPSB0cnVlO1xuXG4gICAgICAgIGlmICh0aGlzLnBvaW50cykge1xuICAgICAgICAgICAgdGhpcy5wb2ludHMubGVuZ3RoID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gW107XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZnVuY3Rpb24gSW1wbCAoZ3JhcGhpY3MpIHtcbiAgICAvLyBpbm5lciBwcm9wZXJ0aWVzXG4gICAgdGhpcy5fdGVzc1RvbCA9IDAuMjU7XG4gICAgdGhpcy5fZGlzdFRvbCA9IDAuMDE7XG4gICAgdGhpcy5fdXBkYXRlUGF0aE9mZnNldCA9IGZhbHNlO1xuICAgIFxuICAgIHRoaXMuX3BhdGhzID0gbnVsbDtcbiAgICB0aGlzLl9wYXRoTGVuZ3RoID0gMDtcbiAgICB0aGlzLl9wYXRoT2Zmc2V0ID0gMDtcbiAgICBcbiAgICB0aGlzLl9wb2ludHMgPSBudWxsO1xuICAgIHRoaXMuX3BvaW50c09mZnNldCA9IDA7XG4gICAgXG4gICAgdGhpcy5fY29tbWFuZHggPSAwO1xuICAgIHRoaXMuX2NvbW1hbmR5ID0gMDtcblxuICAgIHRoaXMuX3BhdGhzID0gW107XG4gICAgdGhpcy5fcG9pbnRzID0gW107XG59XG5cbmNjLmpzLm1peGluKEltcGwucHJvdG90eXBlLCB7XG4gICAgbW92ZVRvICh4LCB5KSB7XG4gICAgICAgIGlmICh0aGlzLl91cGRhdGVQYXRoT2Zmc2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRoT2Zmc2V0ID0gdGhpcy5fcGF0aExlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVBhdGhPZmZzZXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICB0aGlzLl9hZGRQYXRoKCk7XG4gICAgICAgIHRoaXMuX2FkZFBvaW50KHgsIHksIFBvaW50RmxhZ3MuUFRfQ09STkVSKTtcbiAgICBcbiAgICAgICAgdGhpcy5fY29tbWFuZHggPSB4O1xuICAgICAgICB0aGlzLl9jb21tYW5keSA9IHk7XG4gICAgfSxcblxuICAgIGxpbmVUbyAoeCwgeSkge1xuICAgICAgICB0aGlzLl9hZGRQb2ludCh4LCB5LCBQb2ludEZsYWdzLlBUX0NPUk5FUik7XG4gICAgICAgIFxuICAgICAgICB0aGlzLl9jb21tYW5keCA9IHg7XG4gICAgICAgIHRoaXMuX2NvbW1hbmR5ID0geTtcbiAgICB9LFxuXG4gICAgYmV6aWVyQ3VydmVUbyAoYzF4LCBjMXksIGMyeCwgYzJ5LCB4LCB5KSB7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fY3VyUGF0aDtcbiAgICAgICAgdmFyIGxhc3QgPSBwYXRoLnBvaW50c1twYXRoLnBvaW50cy5sZW5ndGggLSAxXTtcbiAgICBcbiAgICAgICAgaWYgKGxhc3QueCA9PT0gYzF4ICYmIGxhc3QueSA9PT0gYzF5ICYmIGMyeCA9PT0geCAmJiBjMnkgPT09IHkpIHtcbiAgICAgICAgICAgIHRoaXMubGluZVRvKHgsIHkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgXG4gICAgICAgIEhlbHBlci50ZXNzZWxhdGVCZXppZXIodGhpcywgbGFzdC54LCBsYXN0LnksIGMxeCwgYzF5LCBjMngsIGMyeSwgeCwgeSwgMCwgUG9pbnRGbGFncy5QVF9DT1JORVIpO1xuICAgIFxuICAgICAgICB0aGlzLl9jb21tYW5keCA9IHg7XG4gICAgICAgIHRoaXMuX2NvbW1hbmR5ID0geTtcbiAgICB9LFxuXG4gICAgcXVhZHJhdGljQ3VydmVUbyAoY3gsIGN5LCB4LCB5KSB7XG4gICAgICAgIHZhciB4MCA9IHRoaXMuX2NvbW1hbmR4O1xuICAgICAgICB2YXIgeTAgPSB0aGlzLl9jb21tYW5keTtcbiAgICAgICAgdGhpcy5iZXppZXJDdXJ2ZVRvKHgwICsgMi4wIC8gMy4wICogKGN4IC0geDApLCB5MCArIDIuMCAvIDMuMCAqIChjeSAtIHkwKSwgeCArIDIuMCAvIDMuMCAqIChjeCAtIHgpLCB5ICsgMi4wIC8gMy4wICogKGN5IC0geSksIHgsIHkpO1xuICAgIH0sXG5cbiAgICBhcmMgKGN4LCBjeSwgciwgc3RhcnRBbmdsZSwgZW5kQW5nbGUsIGNvdW50ZXJjbG9ja3dpc2UpIHtcbiAgICAgICAgSGVscGVyLmFyYyh0aGlzLCBjeCwgY3ksIHIsIHN0YXJ0QW5nbGUsIGVuZEFuZ2xlLCBjb3VudGVyY2xvY2t3aXNlKTtcbiAgICB9LFxuXG4gICAgZWxsaXBzZSAoY3gsIGN5LCByeCwgcnkpIHtcbiAgICAgICAgSGVscGVyLmVsbGlwc2UodGhpcywgY3gsIGN5LCByeCwgcnkpO1xuICAgICAgICB0aGlzLl9jdXJQYXRoLmNvbXBsZXggPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgY2lyY2xlIChjeCwgY3ksIHIpIHtcbiAgICAgICAgSGVscGVyLmVsbGlwc2UodGhpcywgY3gsIGN5LCByLCByKTtcbiAgICAgICAgdGhpcy5fY3VyUGF0aC5jb21wbGV4ID0gZmFsc2U7XG4gICAgfSxcblxuICAgIHJlY3QgKHgsIHksIHcsIGgpIHtcbiAgICAgICAgdGhpcy5tb3ZlVG8oeCwgeSk7XG4gICAgICAgIHRoaXMubGluZVRvKHgsIHkgKyBoKTtcbiAgICAgICAgdGhpcy5saW5lVG8oeCArIHcsIHkgKyBoKTtcbiAgICAgICAgdGhpcy5saW5lVG8oeCArIHcsIHkpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIHRoaXMuX2N1clBhdGguY29tcGxleCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICByb3VuZFJlY3QgKHgsIHksIHcsIGgsIHIpIHtcbiAgICAgICAgSGVscGVyLnJvdW5kUmVjdCh0aGlzLCB4LCB5LCB3LCBoLCByKTtcbiAgICAgICAgdGhpcy5fY3VyUGF0aC5jb21wbGV4ID0gZmFsc2U7XG4gICAgfSxcblxuICAgIGNsZWFyIChjbGVhbikge1xuICAgICAgICB0aGlzLl9wYXRoTGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fcGF0aE9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMuX3BvaW50c09mZnNldCA9IDA7XG4gICAgICBcbiAgICAgICAgdGhpcy5fY3VyUGF0aCA9IG51bGw7XG5cbiAgICAgICAgaWYgKGNsZWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXRocy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgdGhpcy5fcG9pbnRzLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xvc2UgKCkge1xuICAgICAgICB0aGlzLl9jdXJQYXRoLmNsb3NlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIF9hZGRQYXRoICgpIHtcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuX3BhdGhMZW5ndGg7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fcGF0aHNbb2Zmc2V0XTtcbiAgICBcbiAgICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgICAgICBwYXRoID0gbmV3IFBhdGgoKTtcbiAgICBcbiAgICAgICAgICAgIHRoaXMuX3BhdGhzLnB1c2gocGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwYXRoLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgdGhpcy5fcGF0aExlbmd0aCsrO1xuICAgICAgICB0aGlzLl9jdXJQYXRoID0gcGF0aDtcbiAgICBcbiAgICAgICAgcmV0dXJuIHBhdGg7XG4gICAgfSxcbiAgICBcbiAgICBfYWRkUG9pbnQgKHgsIHksIGZsYWdzKSB7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5fY3VyUGF0aDtcbiAgICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG4gICAgXG4gICAgICAgIHZhciBwdDtcbiAgICAgICAgdmFyIHBvaW50cyA9IHRoaXMuX3BvaW50cztcbiAgICAgICAgdmFyIHBhdGhQb2ludHMgPSBwYXRoLnBvaW50cztcbiAgICBcbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMuX3BvaW50c09mZnNldCsrO1xuICAgICAgICBwdCA9IHBvaW50c1tvZmZzZXRdO1xuICAgIFxuICAgICAgICBpZiAoIXB0KSB7XG4gICAgICAgICAgICBwdCA9IG5ldyBQb2ludCh4LCB5KTtcbiAgICAgICAgICAgIHBvaW50cy5wdXNoKHB0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHB0LnggPSB4O1xuICAgICAgICAgICAgcHQueSA9IHk7XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcHQuZmxhZ3MgPSBmbGFncztcbiAgICAgICAgcGF0aFBvaW50cy5wdXNoKHB0KTtcbiAgICB9LFxuXG59KTtcblxuY2MuR3JhcGhpY3MuX0ltcGwgPSBJbXBsO1xubW9kdWxlLmV4cG9ydHMgPSBJbXBsO1xuIl19