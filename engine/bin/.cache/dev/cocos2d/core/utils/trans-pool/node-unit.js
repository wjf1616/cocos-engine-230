
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/utils/trans-pool/node-unit.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

var _utils = require("../../value-types/utils");

/****************************************************************************
 Copyright (c) 2019 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var Uint32_Bytes = 4;
var Uint8_Bytes = 1; // Space : [Dirty]                                  [Size:4 Uint32]

var Dirty_Type = Uint32Array;
var Dirty_Members = 1;
var Dirty_Stride = Dirty_Members * Uint32_Bytes; // Space : [TRS]                                    [Size:4 * 10 Float32|Float64]

var TRS_Members = 10;
var TRS_Stride = TRS_Members * _utils.FLOAT_BYTES; // Space : [LocalMatrix]                            [Size:4 * 16 Float32|Float64]

var LocalMatrix_Members = 16;
var LocalMatrix_Stride = LocalMatrix_Members * _utils.FLOAT_BYTES; // Space : [WorldMatrix]                            [Size:4 * 16 Float32|Float64]

var WorldMatrix_Members = 16;
var WorldMatrix_Stride = WorldMatrix_Members * _utils.FLOAT_BYTES; // Space : [Parent Unit]                            [Size:4 Uint32]
// Space : [Parent Index]                           [Size:4 Uint32]

var Parent_Type = Uint32Array;
var Parent_Members = 2;
var Parent_Stride = Parent_Members * Uint32_Bytes; // Space : [ZOrder]                                 [Size:4 Uint32]

var ZOrder_Type = Uint32Array;
var ZOrder_Members = 1;
var ZOrder_Stride = ZOrder_Members * Uint32_Bytes; // Space : [CullingMask]                            [Size:4 Int32]

var CullingMask_Type = Int32Array;
var CullingMask_Members = 1;
var CullingMask_Stride = CullingMask_Members * Uint32_Bytes; // Space : [Opacity]                                [Size:1 Uint8]

var Opacity_Type = Uint8Array;
var Opacity_Members = 1;
var Opacity_Stride = Opacity_Members * Uint8_Bytes; // Space : [Is3D]                                   [Size:1 Uint8]

var Is3D_Type = Uint8Array;
var Is3D_Members = 1;
var Is3D_Stride = Is3D_Members * Uint8_Bytes; // Space : [NodePtr]                                [Size:4 * 2 Uint32]

var Node_Type = Uint32Array;
var Node_Members = 2; // Space : [Skew]                                   [Size:4 * 2 Float32]

var Skew_Members = 2;
var Skew_Stride = Skew_Members * _utils.FLOAT_BYTES;

var UnitBase = require('./unit-base');

var NodeUnit = function NodeUnit(unitID, memPool) {
  UnitBase.call(this, unitID, memPool);
  var contentNum = this._contentNum;
  this.trsList = new _utils.FLOAT_ARRAY_TYPE(contentNum * TRS_Members);
  this.localMatList = new _utils.FLOAT_ARRAY_TYPE(contentNum * LocalMatrix_Members);
  this.worldMatList = new _utils.FLOAT_ARRAY_TYPE(contentNum * WorldMatrix_Members);

  if (CC_JSB && CC_NATIVERENDERER) {
    this.dirtyList = new Dirty_Type(contentNum * Dirty_Members);
    this.parentList = new Parent_Type(contentNum * Parent_Members);
    this.zOrderList = new ZOrder_Type(contentNum * ZOrder_Members);
    this.cullingMaskList = new CullingMask_Type(contentNum * CullingMask_Members);
    this.opacityList = new Opacity_Type(contentNum * Opacity_Members);
    this.is3DList = new Is3D_Type(contentNum * Is3D_Members);
    this.nodeList = new Node_Type(contentNum * Node_Members);
    this.skewList = new _utils.FLOAT_ARRAY_TYPE(contentNum * Skew_Members);

    this._memPool._nativeMemPool.updateNodeData(unitID, this.dirtyList, this.trsList, this.localMatList, this.worldMatList, this.parentList, this.zOrderList, this.cullingMaskList, this.opacityList, this.is3DList, this.nodeList, this.skewList);
  }

  for (var i = 0; i < contentNum; i++) {
    var space = this._spacesData[i];
    space.trs = new _utils.FLOAT_ARRAY_TYPE(this.trsList.buffer, i * TRS_Stride, TRS_Members);
    space.localMat = new _utils.FLOAT_ARRAY_TYPE(this.localMatList.buffer, i * LocalMatrix_Stride, LocalMatrix_Members);
    space.worldMat = new _utils.FLOAT_ARRAY_TYPE(this.worldMatList.buffer, i * WorldMatrix_Stride, WorldMatrix_Members);

    if (CC_JSB && CC_NATIVERENDERER) {
      space.dirty = new Dirty_Type(this.dirtyList.buffer, i * Dirty_Stride, Dirty_Members);
      space.parent = new Parent_Type(this.parentList.buffer, i * Parent_Stride, Parent_Members);
      space.zOrder = new ZOrder_Type(this.zOrderList.buffer, i * ZOrder_Stride, ZOrder_Members);
      space.cullingMask = new CullingMask_Type(this.cullingMaskList.buffer, i * CullingMask_Stride, CullingMask_Members);
      space.opacity = new Opacity_Type(this.opacityList.buffer, i * Opacity_Stride, Opacity_Members);
      space.is3D = new Is3D_Type(this.is3DList.buffer, i * Is3D_Stride, Is3D_Members);
      space.skew = new _utils.FLOAT_ARRAY_TYPE(this.skewList.buffer, i * Skew_Stride, Skew_Members);
    }
  }
};

(function () {
  var Super = function Super() {};

  Super.prototype = UnitBase.prototype;
  NodeUnit.prototype = new Super();
})();

module.exports = NodeUnit;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGUtdW5pdC5qcyJdLCJuYW1lcyI6WyJVaW50MzJfQnl0ZXMiLCJVaW50OF9CeXRlcyIsIkRpcnR5X1R5cGUiLCJVaW50MzJBcnJheSIsIkRpcnR5X01lbWJlcnMiLCJEaXJ0eV9TdHJpZGUiLCJUUlNfTWVtYmVycyIsIlRSU19TdHJpZGUiLCJGTE9BVF9CWVRFUyIsIkxvY2FsTWF0cml4X01lbWJlcnMiLCJMb2NhbE1hdHJpeF9TdHJpZGUiLCJXb3JsZE1hdHJpeF9NZW1iZXJzIiwiV29ybGRNYXRyaXhfU3RyaWRlIiwiUGFyZW50X1R5cGUiLCJQYXJlbnRfTWVtYmVycyIsIlBhcmVudF9TdHJpZGUiLCJaT3JkZXJfVHlwZSIsIlpPcmRlcl9NZW1iZXJzIiwiWk9yZGVyX1N0cmlkZSIsIkN1bGxpbmdNYXNrX1R5cGUiLCJJbnQzMkFycmF5IiwiQ3VsbGluZ01hc2tfTWVtYmVycyIsIkN1bGxpbmdNYXNrX1N0cmlkZSIsIk9wYWNpdHlfVHlwZSIsIlVpbnQ4QXJyYXkiLCJPcGFjaXR5X01lbWJlcnMiLCJPcGFjaXR5X1N0cmlkZSIsIklzM0RfVHlwZSIsIklzM0RfTWVtYmVycyIsIklzM0RfU3RyaWRlIiwiTm9kZV9UeXBlIiwiTm9kZV9NZW1iZXJzIiwiU2tld19NZW1iZXJzIiwiU2tld19TdHJpZGUiLCJVbml0QmFzZSIsInJlcXVpcmUiLCJOb2RlVW5pdCIsInVuaXRJRCIsIm1lbVBvb2wiLCJjYWxsIiwiY29udGVudE51bSIsIl9jb250ZW50TnVtIiwidHJzTGlzdCIsIkZMT0FUX0FSUkFZX1RZUEUiLCJsb2NhbE1hdExpc3QiLCJ3b3JsZE1hdExpc3QiLCJDQ19KU0IiLCJDQ19OQVRJVkVSRU5ERVJFUiIsImRpcnR5TGlzdCIsInBhcmVudExpc3QiLCJ6T3JkZXJMaXN0IiwiY3VsbGluZ01hc2tMaXN0Iiwib3BhY2l0eUxpc3QiLCJpczNETGlzdCIsIm5vZGVMaXN0Iiwic2tld0xpc3QiLCJfbWVtUG9vbCIsIl9uYXRpdmVNZW1Qb29sIiwidXBkYXRlTm9kZURhdGEiLCJpIiwic3BhY2UiLCJfc3BhY2VzRGF0YSIsInRycyIsImJ1ZmZlciIsImxvY2FsTWF0Iiwid29ybGRNYXQiLCJkaXJ0eSIsInBhcmVudCIsInpPcmRlciIsImN1bGxpbmdNYXNrIiwib3BhY2l0eSIsImlzM0QiLCJza2V3IiwiU3VwZXIiLCJwcm90b3R5cGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBeUJBOztBQXpCQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBMkJBLElBQU1BLFlBQVksR0FBRyxDQUFyQjtBQUNBLElBQU1DLFdBQVcsR0FBRyxDQUFwQixFQUVBOztBQUNBLElBQU1DLFVBQVUsR0FBR0MsV0FBbkI7QUFDQSxJQUFNQyxhQUFhLEdBQUcsQ0FBdEI7QUFDQSxJQUFNQyxZQUFZLEdBQUdELGFBQWEsR0FBR0osWUFBckMsRUFFQTs7QUFDQSxJQUFNTSxXQUFXLEdBQUcsRUFBcEI7QUFDQSxJQUFNQyxVQUFVLEdBQUdELFdBQVcsR0FBR0Usa0JBQWpDLEVBRUE7O0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUcsRUFBNUI7QUFDQSxJQUFNQyxrQkFBa0IsR0FBR0QsbUJBQW1CLEdBQUdELGtCQUFqRCxFQUVBOztBQUNBLElBQU1HLG1CQUFtQixHQUFHLEVBQTVCO0FBQ0EsSUFBTUMsa0JBQWtCLEdBQUdELG1CQUFtQixHQUFHSCxrQkFBakQsRUFFQTtBQUNBOztBQUNBLElBQU1LLFdBQVcsR0FBR1YsV0FBcEI7QUFDQSxJQUFNVyxjQUFjLEdBQUcsQ0FBdkI7QUFDQSxJQUFNQyxhQUFhLEdBQUdELGNBQWMsR0FBR2QsWUFBdkMsRUFFQTs7QUFDQSxJQUFNZ0IsV0FBVyxHQUFHYixXQUFwQjtBQUNBLElBQU1jLGNBQWMsR0FBRyxDQUF2QjtBQUNBLElBQU1DLGFBQWEsR0FBR0QsY0FBYyxHQUFHakIsWUFBdkMsRUFFQTs7QUFDQSxJQUFNbUIsZ0JBQWdCLEdBQUdDLFVBQXpCO0FBQ0EsSUFBTUMsbUJBQW1CLEdBQUcsQ0FBNUI7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QUFHakMsY0FBOUMsRUFBOERELGVBQTlELENBQWhCO0FBQ0FtQyxNQUFBQSxLQUFLLENBQUNXLElBQU4sR0FBYSxJQUFJNUMsU0FBSixDQUFjLEtBQUswQixRQUFMLENBQWNVLE1BQTVCLEVBQW9DSixDQUFDLEdBQUc5QixXQUF4QyxFQUFxREQsWUFBckQsQ0FBYjtBQUNBZ0MsTUFBQUEsS0FBSyxDQUFDWSxJQUFOLEdBQWEsSUFBSTdCLHVCQUFKLENBQXFCLEtBQUtZLFFBQUwsQ0FBY1EsTUFBbkMsRUFBMkNKLENBQUMsR0FBRzFCLFdBQS9DLEVBQTRERCxZQUE1RCxDQUFiO0FBQ0g7QUFDSjtBQUNKLENBbkREOztBQXFEQSxDQUFDLFlBQVU7QUFDUCxNQUFJeUMsS0FBSyxHQUFHLFNBQVJBLEtBQVEsR0FBVSxDQUFFLENBQXhCOztBQUNBQSxFQUFBQSxLQUFLLENBQUNDLFNBQU4sR0FBa0J4QyxRQUFRLENBQUN3QyxTQUEzQjtBQUNBdEMsRUFBQUEsUUFBUSxDQUFDc0MsU0FBVCxHQUFxQixJQUFJRCxLQUFKLEVBQXJCO0FBQ0gsQ0FKRDs7QUFNQUUsTUFBTSxDQUFDQyxPQUFQLEdBQWlCeEMsUUFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxOSBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGVuZ2luZSBzb3VyY2UgY29kZSAodGhlIFwiU29mdHdhcmVcIiksIGEgbGltaXRlZCxcbiB3b3JsZHdpZGUsIHJveWFsdHktZnJlZSwgbm9uLWFzc2lnbmFibGUsIHJldm9jYWJsZSBhbmQgbm9uLWV4Y2x1c2l2ZSBsaWNlbnNlXG4gdG8gdXNlIENvY29zIENyZWF0b3Igc29sZWx5IHRvIGRldmVsb3AgZ2FtZXMgb24geW91ciB0YXJnZXQgcGxhdGZvcm1zLiBZb3Ugc2hhbGxcbiBub3QgdXNlIENvY29zIENyZWF0b3Igc29mdHdhcmUgZm9yIGRldmVsb3Bpbmcgb3RoZXIgc29mdHdhcmUgb3IgdG9vbHMgdGhhdCdzXG4gdXNlZCBmb3IgZGV2ZWxvcGluZyBnYW1lcy4gWW91IGFyZSBub3QgZ3JhbnRlZCB0byBwdWJsaXNoLCBkaXN0cmlidXRlLFxuIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsIGNvcGllcyBvZiBDb2NvcyBDcmVhdG9yLlxuXG4gVGhlIHNvZnR3YXJlIG9yIHRvb2xzIGluIHRoaXMgTGljZW5zZSBBZ3JlZW1lbnQgYXJlIGxpY2Vuc2VkLCBub3Qgc29sZC5cbiBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC4gcmVzZXJ2ZXMgYWxsIHJpZ2h0cyBub3QgZXhwcmVzc2x5IGdyYW50ZWQgdG8geW91LlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuaW1wb3J0IHsgRkxPQVRfQVJSQVlfVFlQRSwgRkxPQVRfQllURVMgfSBmcm9tICcuLi8uLi92YWx1ZS10eXBlcy91dGlscydcblxuY29uc3QgVWludDMyX0J5dGVzID0gNDtcbmNvbnN0IFVpbnQ4X0J5dGVzID0gMTtcblxuLy8gU3BhY2UgOiBbRGlydHldICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTaXplOjQgVWludDMyXVxuY29uc3QgRGlydHlfVHlwZSA9IFVpbnQzMkFycmF5O1xuY29uc3QgRGlydHlfTWVtYmVycyA9IDE7XG5jb25zdCBEaXJ0eV9TdHJpZGUgPSBEaXJ0eV9NZW1iZXJzICogVWludDMyX0J5dGVzO1xuXG4vLyBTcGFjZSA6IFtUUlNdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCAqIDEwIEZsb2F0MzJ8RmxvYXQ2NF1cbmNvbnN0IFRSU19NZW1iZXJzID0gMTA7XG5jb25zdCBUUlNfU3RyaWRlID0gVFJTX01lbWJlcnMgKiBGTE9BVF9CWVRFUztcblxuLy8gU3BhY2UgOiBbTG9jYWxNYXRyaXhdICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTaXplOjQgKiAxNiBGbG9hdDMyfEZsb2F0NjRdXG5jb25zdCBMb2NhbE1hdHJpeF9NZW1iZXJzID0gMTY7XG5jb25zdCBMb2NhbE1hdHJpeF9TdHJpZGUgPSBMb2NhbE1hdHJpeF9NZW1iZXJzICogRkxPQVRfQllURVM7XG5cbi8vIFNwYWNlIDogW1dvcmxkTWF0cml4XSAgICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZTo0ICogMTYgRmxvYXQzMnxGbG9hdDY0XVxuY29uc3QgV29ybGRNYXRyaXhfTWVtYmVycyA9IDE2O1xuY29uc3QgV29ybGRNYXRyaXhfU3RyaWRlID0gV29ybGRNYXRyaXhfTWVtYmVycyAqIEZMT0FUX0JZVEVTO1xuXG4vLyBTcGFjZSA6IFtQYXJlbnQgVW5pdF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXG4vLyBTcGFjZSA6IFtQYXJlbnQgSW5kZXhdICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXG5jb25zdCBQYXJlbnRfVHlwZSA9IFVpbnQzMkFycmF5O1xuY29uc3QgUGFyZW50X01lbWJlcnMgPSAyO1xuY29uc3QgUGFyZW50X1N0cmlkZSA9IFBhcmVudF9NZW1iZXJzICogVWludDMyX0J5dGVzO1xuXG4vLyBTcGFjZSA6IFtaT3JkZXJdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBVaW50MzJdXG5jb25zdCBaT3JkZXJfVHlwZSA9IFVpbnQzMkFycmF5O1xuY29uc3QgWk9yZGVyX01lbWJlcnMgPSAxO1xuY29uc3QgWk9yZGVyX1N0cmlkZSA9IFpPcmRlcl9NZW1iZXJzICogVWludDMyX0J5dGVzO1xuXG4vLyBTcGFjZSA6IFtDdWxsaW5nTWFza10gICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6NCBJbnQzMl1cbmNvbnN0IEN1bGxpbmdNYXNrX1R5cGUgPSBJbnQzMkFycmF5O1xuY29uc3QgQ3VsbGluZ01hc2tfTWVtYmVycyA9IDE7XG5jb25zdCBDdWxsaW5nTWFza19TdHJpZGUgPSBDdWxsaW5nTWFza19NZW1iZXJzICogVWludDMyX0J5dGVzO1xuXG4vLyBTcGFjZSA6IFtPcGFjaXR5XSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW1NpemU6MSBVaW50OF1cbmNvbnN0IE9wYWNpdHlfVHlwZSA9IFVpbnQ4QXJyYXk7XG5jb25zdCBPcGFjaXR5X01lbWJlcnMgPSAxO1xuY29uc3QgT3BhY2l0eV9TdHJpZGUgPSBPcGFjaXR5X01lbWJlcnMgKiBVaW50OF9CeXRlcztcblxuLy8gU3BhY2UgOiBbSXMzRF0gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtTaXplOjEgVWludDhdXG5jb25zdCBJczNEX1R5cGUgPSBVaW50OEFycmF5O1xuY29uc3QgSXMzRF9NZW1iZXJzID0gMTtcbmNvbnN0IElzM0RfU3RyaWRlID0gSXMzRF9NZW1iZXJzICogVWludDhfQnl0ZXM7XG5cbi8vIFNwYWNlIDogW05vZGVQdHJdICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZTo0ICogMiBVaW50MzJdXG5jb25zdCBOb2RlX1R5cGUgPSBVaW50MzJBcnJheTtcbmNvbnN0IE5vZGVfTWVtYmVycyA9IDI7XG5cbi8vIFNwYWNlIDogW1NrZXddICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbU2l6ZTo0ICogMiBGbG9hdDMyXVxuY29uc3QgU2tld19NZW1iZXJzID0gMjtcbmNvbnN0IFNrZXdfU3RyaWRlID0gU2tld19NZW1iZXJzICogRkxPQVRfQllURVM7XG5cbmxldCBVbml0QmFzZSA9IHJlcXVpcmUoJy4vdW5pdC1iYXNlJyk7XG5sZXQgTm9kZVVuaXQgPSBmdW5jdGlvbiAodW5pdElELCBtZW1Qb29sKSB7XG4gICAgVW5pdEJhc2UuY2FsbCh0aGlzLCB1bml0SUQsIG1lbVBvb2wpO1xuXG4gICAgbGV0IGNvbnRlbnROdW0gPSB0aGlzLl9jb250ZW50TnVtO1xuICAgIHRoaXMudHJzTGlzdCA9IG5ldyBGTE9BVF9BUlJBWV9UWVBFKGNvbnRlbnROdW0gKiBUUlNfTWVtYmVycyk7XG4gICAgdGhpcy5sb2NhbE1hdExpc3QgPSBuZXcgRkxPQVRfQVJSQVlfVFlQRShjb250ZW50TnVtICogTG9jYWxNYXRyaXhfTWVtYmVycyk7XG4gICAgdGhpcy53b3JsZE1hdExpc3QgPSBuZXcgRkxPQVRfQVJSQVlfVFlQRShjb250ZW50TnVtICogV29ybGRNYXRyaXhfTWVtYmVycyk7XG5cbiAgICBpZiAoQ0NfSlNCICYmIENDX05BVElWRVJFTkRFUkVSKSB7XG4gICAgICAgIHRoaXMuZGlydHlMaXN0ID0gbmV3IERpcnR5X1R5cGUoY29udGVudE51bSAqIERpcnR5X01lbWJlcnMpO1xuICAgICAgICB0aGlzLnBhcmVudExpc3QgPSBuZXcgUGFyZW50X1R5cGUoY29udGVudE51bSAqIFBhcmVudF9NZW1iZXJzKTtcbiAgICAgICAgdGhpcy56T3JkZXJMaXN0ID0gbmV3IFpPcmRlcl9UeXBlKGNvbnRlbnROdW0gKiBaT3JkZXJfTWVtYmVycyk7XG4gICAgICAgIHRoaXMuY3VsbGluZ01hc2tMaXN0ID0gbmV3IEN1bGxpbmdNYXNrX1R5cGUoY29udGVudE51bSAqIEN1bGxpbmdNYXNrX01lbWJlcnMpO1xuICAgICAgICB0aGlzLm9wYWNpdHlMaXN0ID0gbmV3IE9wYWNpdHlfVHlwZShjb250ZW50TnVtICogT3BhY2l0eV9NZW1iZXJzKTtcbiAgICAgICAgdGhpcy5pczNETGlzdCA9IG5ldyBJczNEX1R5cGUoY29udGVudE51bSAqIElzM0RfTWVtYmVycyk7XG4gICAgICAgIHRoaXMubm9kZUxpc3QgPSBuZXcgTm9kZV9UeXBlKGNvbnRlbnROdW0gKiBOb2RlX01lbWJlcnMpO1xuICAgICAgICB0aGlzLnNrZXdMaXN0ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUoY29udGVudE51bSAqIFNrZXdfTWVtYmVycyk7XG5cbiAgICAgICAgdGhpcy5fbWVtUG9vbC5fbmF0aXZlTWVtUG9vbC51cGRhdGVOb2RlRGF0YShcbiAgICAgICAgICAgIHVuaXRJRCxcbiAgICAgICAgICAgIHRoaXMuZGlydHlMaXN0LFxuICAgICAgICAgICAgdGhpcy50cnNMaXN0LFxuICAgICAgICAgICAgdGhpcy5sb2NhbE1hdExpc3QsXG4gICAgICAgICAgICB0aGlzLndvcmxkTWF0TGlzdCxcbiAgICAgICAgICAgIHRoaXMucGFyZW50TGlzdCxcbiAgICAgICAgICAgIHRoaXMuek9yZGVyTGlzdCxcbiAgICAgICAgICAgIHRoaXMuY3VsbGluZ01hc2tMaXN0LFxuICAgICAgICAgICAgdGhpcy5vcGFjaXR5TGlzdCxcbiAgICAgICAgICAgIHRoaXMuaXMzRExpc3QsXG4gICAgICAgICAgICB0aGlzLm5vZGVMaXN0LFxuICAgICAgICAgICAgdGhpcy5za2V3TGlzdFxuICAgICAgICApO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29udGVudE51bTsgaSArKykge1xuICAgICAgICBsZXQgc3BhY2UgPSB0aGlzLl9zcGFjZXNEYXRhW2ldO1xuXG4gICAgICAgIHNwYWNlLnRycyA9IG5ldyBGTE9BVF9BUlJBWV9UWVBFKHRoaXMudHJzTGlzdC5idWZmZXIsIGkgKiBUUlNfU3RyaWRlLCBUUlNfTWVtYmVycyk7XG4gICAgICAgIHNwYWNlLmxvY2FsTWF0ID0gbmV3IEZMT0FUX0FSUkFZX1RZUEUodGhpcy5sb2NhbE1hdExpc3QuYnVmZmVyLCBpICogTG9jYWxNYXRyaXhfU3RyaWRlLCBMb2NhbE1hdHJpeF9NZW1iZXJzKTtcbiAgICAgICAgc3BhY2Uud29ybGRNYXQgPSBuZXcgRkxPQVRfQVJSQVlfVFlQRSh0aGlzLndvcmxkTWF0TGlzdC5idWZmZXIsIGkgKiBXb3JsZE1hdHJpeF9TdHJpZGUsIFdvcmxkTWF0cml4X01lbWJlcnMpO1xuXG4gICAgICAgIGlmIChDQ19KU0IgJiYgQ0NfTkFUSVZFUkVOREVSRVIpIHtcbiAgICAgICAgICAgIHNwYWNlLmRpcnR5ID0gbmV3IERpcnR5X1R5cGUodGhpcy5kaXJ0eUxpc3QuYnVmZmVyLCBpICogRGlydHlfU3RyaWRlLCBEaXJ0eV9NZW1iZXJzKTtcbiAgICAgICAgICAgIHNwYWNlLnBhcmVudCA9IG5ldyBQYXJlbnRfVHlwZSh0aGlzLnBhcmVudExpc3QuYnVmZmVyLCBpICogUGFyZW50X1N0cmlkZSwgUGFyZW50X01lbWJlcnMpO1xuICAgICAgICAgICAgc3BhY2Uuek9yZGVyID0gbmV3IFpPcmRlcl9UeXBlKHRoaXMuek9yZGVyTGlzdC5idWZmZXIsIGkgKiBaT3JkZXJfU3RyaWRlLCBaT3JkZXJfTWVtYmVycyk7XG4gICAgICAgICAgICBzcGFjZS5jdWxsaW5nTWFzayA9IG5ldyBDdWxsaW5nTWFza19UeXBlKHRoaXMuY3VsbGluZ01hc2tMaXN0LmJ1ZmZlciwgaSAqIEN1bGxpbmdNYXNrX1N0cmlkZSwgQ3VsbGluZ01hc2tfTWVtYmVycyk7XG4gICAgICAgICAgICBzcGFjZS5vcGFjaXR5ID0gbmV3IE9wYWNpdHlfVHlwZSh0aGlzLm9wYWNpdHlMaXN0LmJ1ZmZlciwgaSAqIE9wYWNpdHlfU3RyaWRlLCBPcGFjaXR5X01lbWJlcnMpO1xuICAgICAgICAgICAgc3BhY2UuaXMzRCA9IG5ldyBJczNEX1R5cGUodGhpcy5pczNETGlzdC5idWZmZXIsIGkgKiBJczNEX1N0cmlkZSwgSXMzRF9NZW1iZXJzKTtcbiAgICAgICAgICAgIHNwYWNlLnNrZXcgPSBuZXcgRkxPQVRfQVJSQVlfVFlQRSh0aGlzLnNrZXdMaXN0LmJ1ZmZlciwgaSAqIFNrZXdfU3RyaWRlLCBTa2V3X01lbWJlcnMpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuKGZ1bmN0aW9uKCl7XG4gICAgbGV0IFN1cGVyID0gZnVuY3Rpb24oKXt9O1xuICAgIFN1cGVyLnByb3RvdHlwZSA9IFVuaXRCYXNlLnByb3RvdHlwZTtcbiAgICBOb2RlVW5pdC5wcm90b3R5cGUgPSBuZXcgU3VwZXIoKTtcbn0pKCk7XG5cbm1vZHVsZS5leHBvcnRzID0gTm9kZVVuaXQ7Il19