
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/core/physics/platform/CCPhysicsDebugDraw.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 https://www.cocos.com/

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated engine source code (the "Software"), a limited,
 worldwide, royalty-free, non-assignable, revocable and non-exclusive license
 to use Cocos Creator solely to develop games on your target platforms. You shall
 not use Cocos Creator software for developing other software or tools that's
 used for developing games. You are not granted to publish, distribute,
 sublicense, and/or sell copies of Cocos Creator.

 The software or tools in this License Agreement are licensed, not sold.
 Xiamen Yaji Software Co., Ltd. reserves all rights not expressly granted to you.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var PTM_RATIO = require('../CCPhysicsTypes').PTM_RATIO;

var _tmp_vec2 = cc.v2();

var GREEN_COLOR = cc.Color.GREEN;
var RED_COLOR = cc.Color.RED;

function PhysicsDebugDraw(drawer) {
  b2.Draw.call(this);
  this._drawer = drawer;
  this._xf = this._dxf = new b2.Transform();
}

cc.js.extend(PhysicsDebugDraw, b2.Draw);
cc.js.mixin(PhysicsDebugDraw.prototype, {
  _DrawPolygon: function _DrawPolygon(vertices, vertexCount) {
    var drawer = this._drawer;

    for (var i = 0; i < vertexCount; i++) {
      b2.Transform.MulXV(this._xf, vertices[i], _tmp_vec2);
      var x = _tmp_vec2.x * PTM_RATIO,
          y = _tmp_vec2.y * PTM_RATIO;
      if (i === 0) drawer.moveTo(x, y);else {
        drawer.lineTo(x, y);
      }
    }

    drawer.close();
  },
  DrawPolygon: function DrawPolygon(vertices, vertexCount, color) {
    this._applyStrokeColor(color);

    this._DrawPolygon(vertices, vertexCount);

    this._drawer.stroke();
  },
  DrawSolidPolygon: function DrawSolidPolygon(vertices, vertexCount, color) {
    this._applyFillColor(color);

    this._DrawPolygon(vertices, vertexCount);

    this._drawer.fill();

    this._drawer.stroke();
  },
  _DrawCircle: function _DrawCircle(center, radius) {
    var p = this._xf.p;

    this._drawer.circle((center.x + p.x) * PTM_RATIO, (center.y + p.y) * PTM_RATIO, radius * PTM_RATIO);
  },
  DrawCircle: function DrawCircle(center, radius, color) {
    this._applyStrokeColor(color);

    this._DrawCircle(center, radius);

    this._drawer.stroke();
  },
  DrawSolidCircle: function DrawSolidCircle(center, radius, axis, color) {
    this._applyFillColor(color);

    this._DrawCircle(center, radius);

    this._drawer.fill();
  },
  DrawSegment: function DrawSegment(p1, p2, color) {
    var drawer = this._drawer;

    if (p1.x === p2.x && p1.y === p2.y) {
      this._applyFillColor(color);

      this._DrawCircle(p1, 2 / PTM_RATIO);

      drawer.fill();
      return;
    }

    this._applyStrokeColor(color);

    b2.Transform.MulXV(this._xf, p1, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    b2.Transform.MulXV(this._xf, p2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
  },
  DrawTransform: function DrawTransform(xf) {
    var drawer = this._drawer;
    drawer.strokeColor = RED_COLOR;
    _tmp_vec2.x = _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    _tmp_vec2.x = 1;
    _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
    drawer.strokeColor = GREEN_COLOR;
    _tmp_vec2.x = _tmp_vec2.y = 0;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.moveTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    _tmp_vec2.x = 0;
    _tmp_vec2.y = 1;
    b2.Transform.MulXV(xf, _tmp_vec2, _tmp_vec2);
    drawer.lineTo(_tmp_vec2.x * PTM_RATIO, _tmp_vec2.y * PTM_RATIO);
    drawer.stroke();
  },
  DrawPoint: function DrawPoint(center, radius, color) {},
  _applyStrokeColor: function _applyStrokeColor(color) {
    var strokeColor = this._drawer.strokeColor;
    strokeColor.r = color.r * 255;
    strokeColor.g = color.g * 255;
    strokeColor.b = color.b * 255;
    strokeColor.a = 150;
    this._drawer.strokeColor = strokeColor;
  },
  _applyFillColor: function _applyFillColor(color) {
    var fillColor = this._drawer.fillColor;
    fillColor.r = color.r * 255;
    fillColor.g = color.g * 255;
    fillColor.b = color.b * 255;
    fillColor.a = 150;
    this._drawer.fillColor = fillColor;
  },
  PushTransform: function PushTransform(xf) {
    this._xf = xf;
  },
  PopTransform: function PopTransform() {
    this._xf = this._dxf;
  }
});
module.exports = PhysicsDebugDraw;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNDUGh5c2ljc0RlYnVnRHJhdy5qcyJdLCJuYW1lcyI6WyJQVE1fUkFUSU8iLCJyZXF1aXJlIiwiX3RtcF92ZWMyIiwiY2MiLCJ2MiIsIkdSRUVOX0NPTE9SIiwiQ29sb3IiLCJHUkVFTiIsIlJFRF9DT0xPUiIsIlJFRCIsIlBoeXNpY3NEZWJ1Z0RyYXciLCJkcmF3ZXIiLCJiMiIsIkRyYXciLCJjYWxsIiwiX2RyYXdlciIsIl94ZiIsIl9keGYiLCJUcmFuc2Zvcm0iLCJqcyIsImV4dGVuZCIsIm1peGluIiwicHJvdG90eXBlIiwiX0RyYXdQb2x5Z29uIiwidmVydGljZXMiLCJ2ZXJ0ZXhDb3VudCIsImkiLCJNdWxYViIsIngiLCJ5IiwibW92ZVRvIiwibGluZVRvIiwiY2xvc2UiLCJEcmF3UG9seWdvbiIsImNvbG9yIiwiX2FwcGx5U3Ryb2tlQ29sb3IiLCJzdHJva2UiLCJEcmF3U29saWRQb2x5Z29uIiwiX2FwcGx5RmlsbENvbG9yIiwiZmlsbCIsIl9EcmF3Q2lyY2xlIiwiY2VudGVyIiwicmFkaXVzIiwicCIsImNpcmNsZSIsIkRyYXdDaXJjbGUiLCJEcmF3U29saWRDaXJjbGUiLCJheGlzIiwiRHJhd1NlZ21lbnQiLCJwMSIsInAyIiwiRHJhd1RyYW5zZm9ybSIsInhmIiwic3Ryb2tlQ29sb3IiLCJEcmF3UG9pbnQiLCJyIiwiZyIsImIiLCJhIiwiZmlsbENvbG9yIiwiUHVzaFRyYW5zZm9ybSIsIlBvcFRyYW5zZm9ybSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBeUJBLElBQU1BLFNBQVMsR0FBR0MsT0FBTyxDQUFDLG1CQUFELENBQVAsQ0FBNkJELFNBQS9DOztBQUVBLElBQUlFLFNBQVMsR0FBR0MsRUFBRSxDQUFDQyxFQUFILEVBQWhCOztBQUVBLElBQUlDLFdBQVcsR0FBR0YsRUFBRSxDQUFDRyxLQUFILENBQVNDLEtBQTNCO0FBQ0EsSUFBSUMsU0FB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QUNILEdBeEdtQztBQTBHcENmLEVBQUFBLGVBMUdvQywyQkEwR25CSixLQTFHbUIsRUEwR1o7QUFDcEIsUUFBSXlCLFNBQVMsR0FBRyxLQUFLNUMsT0FBTCxDQUFhNEMsU0FBN0I7QUFDQUEsSUFBQUEsU0FBUyxDQUFDSixDQUFWLEdBQWNyQixLQUFLLENBQUNxQixDQUFOLEdBQVEsR0FBdEI7QUFDQUksSUFBQUEsU0FBUyxDQUFDSCxDQUFWLEdBQWN0QixLQUFLLENBQUNzQixDQUFOLEdBQVEsR0FBdEI7QUFDQUcsSUFBQUEsU0FBUyxDQUFDRixDQUFWLEdBQWN2QixLQUFLLENBQUN1QixDQUFOLEdBQVEsR0FBdEI7QUFDQUUsSUFBQUEsU0FBUyxDQUFDRCxDQUFWLEdBQWMsR0FBZDtBQUVBLFNBQUszQyxPQUFMLENBQWE0QyxTQUFiLEdBQXlCQSxTQUF6QjtBQUNILEdBbEhtQztBQW9IcENDLEVBQUFBLGFBcEhvQyx5QkFvSHJCUixFQXBIcUIsRUFvSGpCO0FBQ2YsU0FBS3BDLEdBQUwsR0FBV29DLEVBQVg7QUFDSCxHQXRIbUM7QUF3SHBDUyxFQUFBQSxZQXhIb0MsMEJBd0hwQjtBQUNaLFNBQUs3QyxHQUFMLEdBQVcsS0FBS0MsSUFBaEI7QUFDSDtBQTFIbUMsQ0FBeEM7QUE2SEE2QyxNQUFNLENBQUNDLE9BQVAsR0FBaUJyRCxnQkFBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuIENvcHlyaWdodCAoYykgMjAxNy0yMDE4IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZW5naW5lIHNvdXJjZSBjb2RlICh0aGUgXCJTb2Z0d2FyZVwiKSwgYSBsaW1pdGVkLFxuIHdvcmxkd2lkZSwgcm95YWx0eS1mcmVlLCBub24tYXNzaWduYWJsZSwgcmV2b2NhYmxlIGFuZCBub24tZXhjbHVzaXZlIGxpY2Vuc2VcbiB0byB1c2UgQ29jb3MgQ3JlYXRvciBzb2xlbHkgdG8gZGV2ZWxvcCBnYW1lcyBvbiB5b3VyIHRhcmdldCBwbGF0Zm9ybXMuIFlvdSBzaGFsbFxuIG5vdCB1c2UgQ29jb3MgQ3JlYXRvciBzb2Z0d2FyZSBmb3IgZGV2ZWxvcGluZyBvdGhlciBzb2Z0d2FyZSBvciB0b29scyB0aGF0J3NcbiB1c2VkIGZvciBkZXZlbG9waW5nIGdhbWVzLiBZb3UgYXJlIG5vdCBncmFudGVkIHRvIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsXG4gc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIENvY29zIENyZWF0b3IuXG5cbiBUaGUgc29mdHdhcmUgb3IgdG9vbHMgaW4gdGhpcyBMaWNlbnNlIEFncmVlbWVudCBhcmUgbGljZW5zZWQsIG5vdCBzb2xkLlxuIFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLiByZXNlcnZlcyBhbGwgcmlnaHRzIG5vdCBleHByZXNzbHkgZ3JhbnRlZCB0byB5b3UuXG5cbiBUSEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXG4gSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFksXG4gRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG4gQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxuIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HIEZST00sXG4gT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTlxuIFRIRSBTT0ZUV0FSRS5cbiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBQVE1fUkFUSU8gPSByZXF1aXJlKCcuLi9DQ1BoeXNpY3NUeXBlcycpLlBUTV9SQVRJTztcblxubGV0IF90bXBfdmVjMiA9IGNjLnYyKCk7XG5cbmxldCBHUkVFTl9DT0xPUiA9IGNjLkNvbG9yLkdSRUVOO1xubGV0IFJFRF9DT0xPUiA9IGNjLkNvbG9yLlJFRDtcblxuZnVuY3Rpb24gUGh5c2ljc0RlYnVnRHJhdyAoZHJhd2VyKSB7XG4gICAgYjIuRHJhdy5jYWxsKHRoaXMpO1xuICAgIHRoaXMuX2RyYXdlciA9IGRyYXdlcjtcbiAgICB0aGlzLl94ZiA9IHRoaXMuX2R4ZiA9IG5ldyBiMi5UcmFuc2Zvcm0oKTtcbn1cblxuY2MuanMuZXh0ZW5kKFBoeXNpY3NEZWJ1Z0RyYXcsIGIyLkRyYXcpO1xuXG5jYy5qcy5taXhpbihQaHlzaWNzRGVidWdEcmF3LnByb3RvdHlwZSwge1xuICAgIF9EcmF3UG9seWdvbiAodmVydGljZXMsIHZlcnRleENvdW50KSB7XG4gICAgICAgIHZhciBkcmF3ZXIgPSB0aGlzLl9kcmF3ZXI7XG4gICAgICAgIFxuICAgICAgICBmb3IgKHZhciBpPTA7IGk8dmVydGV4Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgYjIuVHJhbnNmb3JtLk11bFhWKHRoaXMuX3hmLCB2ZXJ0aWNlc1tpXSwgX3RtcF92ZWMyKTtcbiAgICAgICAgICAgIGxldCB4ID0gX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sXG4gICAgICAgICAgICAgICAgeSA9IF90bXBfdmVjMi55ICogUFRNX1JBVElPO1xuICAgICAgICAgICAgaWYgKGkgPT09IDApXG4gICAgICAgICAgICAgICAgZHJhd2VyLm1vdmVUbyh4LCB5KTtcbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRyYXdlci5saW5lVG8oeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBkcmF3ZXIuY2xvc2UoKTtcbiAgICB9LFxuXG4gICAgRHJhd1BvbHlnb24gKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCwgY29sb3IpIHtcbiAgICAgICAgdGhpcy5fYXBwbHlTdHJva2VDb2xvcihjb2xvcik7XG4gICAgICAgIHRoaXMuX0RyYXdQb2x5Z29uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCk7XG4gICAgICAgIHRoaXMuX2RyYXdlci5zdHJva2UoKTtcbiAgICB9LFxuXG4gICAgRHJhd1NvbGlkUG9seWdvbiAodmVydGljZXMsIHZlcnRleENvdW50LCBjb2xvcikge1xuICAgICAgICB0aGlzLl9hcHBseUZpbGxDb2xvcihjb2xvcik7XG4gICAgICAgIHRoaXMuX0RyYXdQb2x5Z29uKHZlcnRpY2VzLCB2ZXJ0ZXhDb3VudCk7XG4gICAgICAgIHRoaXMuX2RyYXdlci5maWxsKCk7XG4gICAgICAgIHRoaXMuX2RyYXdlci5zdHJva2UoKTtcbiAgICB9LFxuXG4gICAgX0RyYXdDaXJjbGUgKGNlbnRlciwgcmFkaXVzKSB7XG4gICAgICAgIGxldCBwID0gdGhpcy5feGYucDtcbiAgICAgICAgdGhpcy5fZHJhd2VyLmNpcmNsZSgoY2VudGVyLnggKyBwLngpICogUFRNX1JBVElPLCAoY2VudGVyLnkgKyBwLnkpICogUFRNX1JBVElPLCByYWRpdXMgKiBQVE1fUkFUSU8pO1xuICAgIH0sXG5cbiAgICBEcmF3Q2lyY2xlIChjZW50ZXIsIHJhZGl1cywgY29sb3IpIHtcbiAgICAgICAgdGhpcy5fYXBwbHlTdHJva2VDb2xvcihjb2xvcik7XG4gICAgICAgIHRoaXMuX0RyYXdDaXJjbGUoY2VudGVyLCByYWRpdXMpO1xuICAgICAgICB0aGlzLl9kcmF3ZXIuc3Ryb2tlKCk7XG4gICAgfSxcblxuICAgIERyYXdTb2xpZENpcmNsZSAoY2VudGVyLCByYWRpdXMsIGF4aXMsIGNvbG9yKSB7XG4gICAgICAgIHRoaXMuX2FwcGx5RmlsbENvbG9yKGNvbG9yKTtcbiAgICAgICAgdGhpcy5fRHJhd0NpcmNsZShjZW50ZXIsIHJhZGl1cyk7XG4gICAgICAgIHRoaXMuX2RyYXdlci5maWxsKCk7XG4gICAgfSxcblxuICAgIERyYXdTZWdtZW50IChwMSwgcDIsIGNvbG9yKSB7XG4gICAgICAgIHZhciBkcmF3ZXIgPSB0aGlzLl9kcmF3ZXI7XG5cbiAgICAgICAgaWYgKHAxLnggPT09IHAyLnggJiYgcDEueSA9PT0gcDIueSkge1xuICAgICAgICAgICAgdGhpcy5fYXBwbHlGaWxsQ29sb3IoY29sb3IpO1xuICAgICAgICAgICAgdGhpcy5fRHJhd0NpcmNsZShwMSwgMi9QVE1fUkFUSU8pO1xuICAgICAgICAgICAgZHJhd2VyLmZpbGwoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBseVN0cm9rZUNvbG9yKGNvbG9yKTtcblxuICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYodGhpcy5feGYsIHAxLCBfdG1wX3ZlYzIpO1xuICAgICAgICBkcmF3ZXIubW92ZVRvKF90bXBfdmVjMi54ICogUFRNX1JBVElPLCBfdG1wX3ZlYzIueSAqIFBUTV9SQVRJTyk7XG4gICAgICAgIGIyLlRyYW5zZm9ybS5NdWxYVih0aGlzLl94ZiwgcDIsIF90bXBfdmVjMik7XG4gICAgICAgIGRyYXdlci5saW5lVG8oX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sIF90bXBfdmVjMi55ICogUFRNX1JBVElPKTtcbiAgICAgICAgZHJhd2VyLnN0cm9rZSgpOyAgIFxuICAgIH0sXG5cbiAgICBEcmF3VHJhbnNmb3JtICh4Zikge1xuICAgICAgICB2YXIgZHJhd2VyID0gdGhpcy5fZHJhd2VyO1xuXG4gICAgICAgIGRyYXdlci5zdHJva2VDb2xvciA9IFJFRF9DT0xPUjtcblxuICAgICAgICBfdG1wX3ZlYzIueCA9IF90bXBfdmVjMi55ID0gMDtcbiAgICAgICAgYjIuVHJhbnNmb3JtLk11bFhWKHhmLCBfdG1wX3ZlYzIsIF90bXBfdmVjMik7XG4gICAgICAgIGRyYXdlci5tb3ZlVG8oX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sIF90bXBfdmVjMi55ICogUFRNX1JBVElPKTtcbiAgICAgICAgXG4gICAgICAgIF90bXBfdmVjMi54ID0gMTsgX3RtcF92ZWMyLnkgPSAwO1xuICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYoeGYsIF90bXBfdmVjMiwgX3RtcF92ZWMyKTtcbiAgICAgICAgZHJhd2VyLmxpbmVUbyhfdG1wX3ZlYzIueCAqIFBUTV9SQVRJTywgX3RtcF92ZWMyLnkgKiBQVE1fUkFUSU8pO1xuXG4gICAgICAgIGRyYXdlci5zdHJva2UoKTtcblxuICAgICAgICBkcmF3ZXIuc3Ryb2tlQ29sb3IgPSBHUkVFTl9DT0xPUjtcblxuICAgICAgICBfdG1wX3ZlYzIueCA9IF90bXBfdmVjMi55ID0gMDtcbiAgICAgICAgYjIuVHJhbnNmb3JtLk11bFhWKHhmLCBfdG1wX3ZlYzIsIF90bXBfdmVjMik7XG4gICAgICAgIGRyYXdlci5tb3ZlVG8oX3RtcF92ZWMyLnggKiBQVE1fUkFUSU8sIF90bXBfdmVjMi55ICogUFRNX1JBVElPKTtcbiAgICAgICAgXG4gICAgICAgIF90bXBfdmVjMi54ID0gMDsgX3RtcF92ZWMyLnkgPSAxO1xuICAgICAgICBiMi5UcmFuc2Zvcm0uTXVsWFYoeGYsIF90bXBfdmVjMiwgX3RtcF92ZWMyKTtcbiAgICAgICAgZHJhd2VyLmxpbmVUbyhfdG1wX3ZlYzIueCAqIFBUTV9SQVRJTywgX3RtcF92ZWMyLnkgKiBQVE1fUkFUSU8pO1xuXG4gICAgICAgIGRyYXdlci5zdHJva2UoKTtcbiAgICB9LFxuXG4gICAgRHJhd1BvaW50IChjZW50ZXIsIHJhZGl1cywgY29sb3IpIHtcbiAgICB9LFxuXG4gICAgX2FwcGx5U3Ryb2tlQ29sb3IgKGNvbG9yKSB7XG4gICAgICAgIGxldCBzdHJva2VDb2xvciA9IHRoaXMuX2RyYXdlci5zdHJva2VDb2xvcjtcbiAgICAgICAgc3Ryb2tlQ29sb3IuciA9IGNvbG9yLnIqMjU1O1xuICAgICAgICBzdHJva2VDb2xvci5nID0gY29sb3IuZyoyNTU7XG4gICAgICAgIHN0cm9rZUNvbG9yLmIgPSBjb2xvci5iKjI1NTtcbiAgICAgICAgc3Ryb2tlQ29sb3IuYSA9IDE1MDtcbiAgICAgICAgdGhpcy5fZHJhd2VyLnN0cm9rZUNvbG9yID0gc3Ryb2tlQ29sb3I7XG4gICAgfSxcblxuICAgIF9hcHBseUZpbGxDb2xvciAoY29sb3IpIHtcbiAgICAgICAgbGV0IGZpbGxDb2xvciA9IHRoaXMuX2RyYXdlci5maWxsQ29sb3I7XG4gICAgICAgIGZpbGxDb2xvci5yID0gY29sb3IucioyNTU7XG4gICAgICAgIGZpbGxDb2xvci5nID0gY29sb3IuZyoyNTU7XG4gICAgICAgIGZpbGxDb2xvci5iID0gY29sb3IuYioyNTU7XG4gICAgICAgIGZpbGxDb2xvci5hID0gMTUwO1xuXG4gICAgICAgIHRoaXMuX2RyYXdlci5maWxsQ29sb3IgPSBmaWxsQ29sb3I7XG4gICAgfSxcblxuICAgIFB1c2hUcmFuc2Zvcm0gKHhmKSB7XG4gICAgICAgIHRoaXMuX3hmID0geGY7XG4gICAgfSxcblxuICAgIFBvcFRyYW5zZm9ybSAoKSB7XG4gICAgICAgIHRoaXMuX3hmID0gdGhpcy5fZHhmO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBoeXNpY3NEZWJ1Z0RyYXc7XG4iXX0=