
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'engine-dev/cocos2d/particle/CCPNGReader.js';
                    var __require = nodeEnv ? function (request) {
                        return require(request);
                    } : function (request) {
                        return __quick_compile_engine__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_engine__.registerModule(__filename, module);}"use strict";

/****************************************************************************
 Copyright (c) 2011 Devon Govett
 Copyright (c) 2008-2010 Ricardo Quesada
 Copyright (c) 2011-2012 cocos2d-x.org
 Copyright (c) 2013-2016 Chukong Technologies Inc.
 Copyright (c) 2017-2018 Xiamen Yaji Software Co., Ltd.

 http://www.cocos2d-x.org


 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 ****************************************************************************/
var zlib = require('../compression/zlib.min');

var debug = require('../core/CCDebug');
/**
 * A png file reader
 * @name PNGReader
 */


var PNGReader = function PNGReader(data) {
  var chunkSize, colors, delayDen, delayNum, frame, i, index, key, section, ccshort, text, _i, _j, _ref;

  this.data = data;
  this.pos = 8;
  this.palette = [];
  this.imgData = [];
  this.transparency = {};
  this.animation = null;
  this.text = {};
  frame = null;

  while (true) {
    chunkSize = this.readUInt32();

    section = function () {
      var _i, _results;

      _results = [];

      for (i = _i = 0; _i < 4; i = ++_i) {
        _results.push(String.fromCharCode(this.data[this.pos++]));
      }

      return _results;
    }.call(this).join('');

    switch (section) {
      case 'IHDR':
        this.width = this.readUInt32();
        this.height = this.readUInt32();
        this.bits = this.data[this.pos++];
        this.colorType = this.data[this.pos++];
        this.compressionMethod = this.data[this.pos++];
        this.filterMethod = this.data[this.pos++];
        this.interlaceMethod = this.data[this.pos++];
        break;

      case 'acTL':
        this.animation = {
          numFrames: this.readUInt32(),
          numPlays: this.readUInt32() || Infinity,
          frames: []
        };
        break;

      case 'PLTE':
        this.palette = this.read(chunkSize);
        break;

      case 'fcTL':
        if (frame) {
          this.animation.frames.push(frame);
        }

        this.pos += 4;
        frame = {
          width: this.readUInt32(),
          height: this.readUInt32(),
          xOffset: this.readUInt32(),
          yOffset: this.readUInt32()
        };
        delayNum = this.readUInt16();
        delayDen = this.readUInt16() || 100;
        frame.delay = 1000 * delayNum / delayDen;
        frame.disposeOp = this.data[this.pos++];
        frame.blendOp = this.data[this.pos++];
        frame.data = [];
        break;

      case 'IDAT':
      case 'fdAT':
        if (section === 'fdAT') {
          this.pos += 4;
          chunkSize -= 4;
        }

        data = (frame != null ? frame.data : void 0) || this.imgData;

        for (i = _i = 0; 0 <= chunkSize ? _i < chunkSize : _i > chunkSize; i = 0 <= chunkSize ? ++_i : --_i) {
          data.push(this.data[this.pos++]);
        }

        break;

      case 'tRNS':
        this.transparency = {};

        switch (this.colorType) {
          case 3:
            this.transparency.indexed = this.read(chunkSize);
            ccshort = 255 - this.transparency.indexed.length;

            if (ccshort > 0) {
              for (i = _j = 0; 0 <= ccshort ? _j < ccshort : _j > ccshort; i = 0 <= ccshort ? ++_j : --_j) {
                this.transparency.indexed.push(255);
              }
            }

            break;

          case 0:
            this.transparency.grayscale = this.read(chunkSize)[0];
            break;

          case 2:
            this.transparency.rgb = this.read(chunkSize);
        }

        break;

      case 'tEXt':
        text = this.read(chunkSize);
        index = text.indexOf(0);
        key = String.fromCharCode.apply(String, text.slice(0, index));
        this.text[key] = String.fromCharCode.apply(String, text.slice(index + 1));
        break;

      case 'IEND':
        if (frame) {
          this.animation.frames.push(frame);
        }

        this.colors = function () {
          switch (this.colorType) {
            case 0:
            case 3:
            case 4:
              return 1;

            case 2:
            case 6:
              return 3;
          }
        }.call(this);

        this.hasAlphaChannel = (_ref = this.colorType) === 4 || _ref === 6;
        colors = this.colors + (this.hasAlphaChannel ? 1 : 0);
        this.pixelBitlength = this.bits * colors;

        this.colorSpace = function () {
          switch (this.colors) {
            case 1:
              return 'DeviceGray';

            case 3:
              return 'DeviceRGB';
          }
        }.call(this);

        if (Uint8Array != Array) this.imgData = new Uint8Array(this.imgData);
        return;

      default:
        this.pos += chunkSize;
    }

    this.pos += 4;

    if (this.pos > this.data.length) {
      throw new Error(debug.getError(6017));
    }
  }
};

PNGReader.prototype = {
  constructor: PNGReader,
  read: function read(bytes) {
    var i, _i, _results;

    _results = [];

    for (i = _i = 0; 0 <= bytes ? _i < bytes : _i > bytes; i = 0 <= bytes ? ++_i : --_i) {
      _results.push(this.data[this.pos++]);
    }

    return _results;
  },
  readUInt32: function readUInt32() {
    var b1, b2, b3, b4;
    b1 = this.data[this.pos++] << 24;
    b2 = this.data[this.pos++] << 16;
    b3 = this.data[this.pos++] << 8;
    b4 = this.data[this.pos++];
    return b1 | b2 | b3 | b4;
  },
  readUInt16: function readUInt16() {
    var b1, b2;
    b1 = this.data[this.pos++] << 8;
    b2 = this.data[this.pos++];
    return b1 | b2;
  },
  decodePixels: function decodePixels(data) {
    var ccbyte, c, col, i, left, length, p, pa, paeth, pb, pc, pixelBytes, pixels, pos, row, scanlineLength, upper, upperLeft, _i, _j, _k, _l, _m;

    if (data == null) {
      data = this.imgData;
    }

    if (data.length === 0) {
      return new Uint8Array(0);
    }

    var inflate = new zlib.Inflate(data, {
      index: 0,
      verify: false
    });
    data = inflate.decompress();
    pixelBytes = this.pixelBitlength / 8;
    scanlineLength = pixelBytes * this.width;
    pixels = new Uint8Array(scanlineLength * this.height);
    length = data.length;
    row = 0;
    pos = 0;
    c = 0;

    while (pos < length) {
      switch (data[pos++]) {
        case 0:
          for (i = _i = 0; _i < scanlineLength; i = _i += 1) {
            pixels[c++] = data[pos++];
          }

          break;

        case 1:
          for (i = _j = 0; _j < scanlineLength; i = _j += 1) {
            ccbyte = data[pos++];
            left = i < pixelBytes ? 0 : pixels[c - pixelBytes];
            pixels[c++] = (ccbyte + left) % 256;
          }

          break;

        case 2:
          for (i = _k = 0; _k < scanlineLength; i = _k += 1) {
            ccbyte = data[pos++];
            col = (i - i % pixelBytes) / pixelBytes;
            upper = row && pixels[(row - 1) * scanlineLength + col * pixelBytes + i % pixelBytes];
            pixels[c++] = (upper + ccbyte) % 256;
          }

          break;

        case 3:
          for (i = _l = 0; _l < scanlineLength; i = _l += 1) {
            ccbyte = data[pos++];
            col = (i - i % pixelBytes) / pixelBytes;
            left = i < pixelBytes ? 0 : pixels[c - pixelBytes];
            upper = row && pixels[(row - 1) * scanlineLength + col * pixelBytes + i % pixelBytes];
            pixels[c++] = (ccbyte + Math.floor((left + upper) / 2)) % 256;
          }

          break;

        case 4:
          for (i = _m = 0; _m < scanlineLength; i = _m += 1) {
            ccbyte = data[pos++];
            col = (i - i % pixelBytes) / pixelBytes;
            left = i < pixelBytes ? 0 : pixels[c - pixelBytes];

            if (row === 0) {
              upper = upperLeft = 0;
            } else {
              upper = pixels[(row - 1) * scanlineLength + col * pixelBytes + i % pixelBytes];
              upperLeft = col && pixels[(row - 1) * scanlineLength + (col - 1) * pixelBytes + i % pixelBytes];
            }

            p = left + upper - upperLeft;
            pa = Math.abs(p - left);
            pb = Math.abs(p - upper);
            pc = Math.abs(p - upperLeft);

            if (pa <= pb && pa <= pc) {
              paeth = left;
            } else if (pb <= pc) {
              paeth = upper;
            } else {
              paeth = upperLeft;
            }

            pixels[c++] = (ccbyte + paeth) % 256;
          }

          break;

        default:
          throw new Error(debug.getError(6018, data[pos - 1]));
      }

      row++;
    }

    return pixels;
  },
  copyToImageData: function copyToImageData(imageData, pixels) {
    var alpha, colors, data, i, input, j, k, length, palette, v, _ref;

    colors = this.colors;
    palette = null;
    alpha = this.hasAlphaChannel;

    if (this.palette.length) {
      palette = (_ref = this._decodedPalette) != null ? _ref : this._decodedPalette = this.decodePalette();
      colors = 4;
      alpha = true;
    }

    data = imageData.data || imageData;
    length = data.length;
    input = palette || pixels;
    i = j = 0;

    if (colors === 1) {
      while (i < length) {
        k = palette ? pixels[i / 4] * 4 : j;
        v = input[k++];
        data[i++] = v;
        data[i++] = v;
        data[i++] = v;
        data[i++] = alpha ? input[k++] : 255;
        j = k;
      }
    } else {
      while (i < length) {
        k = palette ? pixels[i / 4] * 4 : j;
        data[i++] = input[k++];
        data[i++] = input[k++];
        data[i++] = input[k++];
        data[i++] = alpha ? input[k++] : 255;
        j = k;
      }
    }
  },
  decodePalette: function decodePalette() {
    var c, i, palette, pos, ret, transparency, _i, _ref, _ref1;

    palette = this.palette;
    transparency = this.transparency.indexed || [];
    ret = new Uint8Array((transparency.length || 0) + palette.length);
    pos = 0;
    c = 0;

    for (i = _i = 0, _ref = palette.length; _i < _ref; i = _i += 3) {
      ret[pos++] = palette[i];
      ret[pos++] = palette[i + 1];
      ret[pos++] = palette[i + 2];
      ret[pos++] = (_ref1 = transparency[c++]) != null ? _ref1 : 255;
    }

    return ret;
  },
  render: function render(canvas) {
    var ctx, data;
    canvas.width = this.width;
    canvas.height = this.height;
    ctx = canvas.getContext("2d");
    data = ctx.createImageData(this.width, this.height);
    this.copyToImageData(data, this.decodePixels());
    return ctx.putImageData(data, 0, 0);
  }
};
module.exports = PNGReader;
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_engine__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNDUE5HUmVhZGVyLmpzIl0sIm5hbWVzIjpbInpsaWIiLCJyZXF1aXJlIiwiZGVidWciLCJQTkdSZWFkZXIiLCJkYXRhIiwiY2h1bmtTaXplIiwiY29sb3JzIiwiZGVsYXlEZW4iLCJkZWxheU51bSIsImZyYW1lIiwiaSIsImluZGV4Iiwia2V5Iiwic2VjdGlvbiIsImNjc2hvcnQiLCJ0ZXh0IiwiX2kiLCJfaiIsIl9yZWYiLCJwb3MiLCJwYWxldHRlIiwiaW1nRGF0YSIsInRyYW5zcGFyZW5jeSIsImFuaW1hdGlvbiIsInJlYWRVSW50MzIiLCJfcmVzdWx0cyIsInB1c2giLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjYWxsIiwiam9pbiIsIndpZHRoIiwiaGVpZ2h0IiwiYml0cyIsImNvbG9yVHlwZSIsImNvbXByZXNzaW9uTWV0aG9kIiwiZmlsdGVyTWV0aG9kIiwiaW50ZXJsYWNlTWV0aG9kIiwibnVtRnJhbWVzIiwibnVtUGxheXMiLCJJbmZpbml0eSIsImZyYW1lcyIsInJlYWQiLCJ4T2Zmc2V0IiwieU9mZnNldCIsInJlYWRVSW50MTYiLCJkZWxheSIsImRpc3Bvc2VPcCIsImJsZW5kT3AiLCJpbmRleGVkIiwibGVuZ3RoIiwiZ3JheXNjYWxlIiwicmdiIiwiaW5kZXhPZiIsImFwcGx5Iiwic2xpY2UiLCJoYXNBbHBoYUNoYW5uZWwiLCJwaXhlbEJpdGxlbmd0aCIsImNvbG9yU3BhY2UiLCJVaW50OEFycmF5IiwiQXJyYXkiLCJFcnJvciIsImdldEVycm9yIiwicHJvdG90eXBlIiwiY29uc3RydWN0b3IiLCJieXRlcyIsImIxIiwiYjIiLCJiMyIsImI0IiwiZGVjb2RlUGl4ZWxzIiwiY2NieXRlIiwiYyIsImNvbCIsImxlZnQiLCJwIiwicGEiLCJwYWV0aCIsInBiIiwicGMiLCJwaXhlbEJ5dGVzIiwicGl4ZWxzIiwicm93Iiwic2NhbmxpbmVMZW5ndGgiLCJ1cHBlciIsInVwcGVyTGVmdCIsIl9rIiwiX2wiLCJfbSIsImluZmxhdGUiLCJJbmZsYXRlIiwidmVyaWZ5IiwiZGVjb21wcmVzcyIsIk1hdGgiLCJmbG9vciIsImFicyIsImNvcHlUb0ltYWdlRGF0YSIsImltYWdlRGF0YSIsImFscGhhIiwiaW5wdXQiLCJqIiwiayIsInYiLCJfZGVjb2RlZFBhbGV0dGUiLCJkZWNvZGVQYWxldHRlIiwicmV0IiwiX3JlZjEiLCJyZW5kZXIiLCJjYW52YXMiLCJjdHgiLCJnZXRDb250ZXh0IiwiY3JlYXRlSW1hZ2VEYXRhIiwicHV0SW1hZ2VEYXRhIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBNkJBLElBQU1BLElBQUksR0FBR0MsT0FBTyxDQUFDLHlCQUFELENBQXBCOztBQUNBLElBQU1DLEtBQUssR0FBR0QsT0FBTyxDQUFDLGlCQUFELENBQXJCO0FBRUE7Ozs7OztBQUlBLElBQUlFLFNBQVMsR0FBRyxTQUFaQSxTQUFZLENBQVNDLElBQVQsRUFBYztBQUMxQixNQUFJQyxTQUFKLEVBQWVDLE1BQWYsRUFBdUJDLFFBQXZCLEVBQWlDQyxRQUFqQyxFQUEyQ0MsS0FBM0MsRUFBa0RDLENBQWxELEVBQXFEQyxLQUFyRCxFQUE0REMsR0FBNUQsRUFBaUVDLE9BQWpFLEVBQTBFQyxPQUExRSxFQUFtRkMsSUFBbkYsRUFBeUZDLEVBQXpGLEVBQTZGQyxFQUE3RixFQUFpR0MsSUFBakc7O0FBQ0EsT0FBS2QsSUFBTCxHQUFZQSxJQUFaO0FBQ0EsT0FBS2UsR0FBTCxHQUFXLENBQVg7QUFDQSxPQUFLQyxPQUFMLEdBQWUsRUFBZjtBQUNBLE9BQUtDLE9BQUwsR0FBZSxFQUFmO0FBQ0EsT0FBS0MsWUFBTCxHQUFvQixFQUFwQjtBQUNBLE9BQUtDLFNBQUwsR0FBaUIsSUFBakI7QUFDQSxPQUFLUixJQUFMLEdBQVksRUFBWjtBQUNBTixFQUFBQSxLQUFLLEdBQUcsSUFBUjs7QUFDQSxTQUFPLElBQVAsRUFBYTtBQUNUSixJQUFBQSxTQUFTLEdBQUcsS0FBS21CLFVB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KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gQ29weXJpZ2h0IChjKSAyMDExIERldm9uIEdvdmV0dFxuIENvcHlyaWdodCAoYykgMjAwOC0yMDEwIFJpY2FyZG8gUXVlc2FkYVxuIENvcHlyaWdodCAoYykgMjAxMS0yMDEyIGNvY29zMmQteC5vcmdcbiBDb3B5cmlnaHQgKGMpIDIwMTMtMjAxNiBDaHVrb25nIFRlY2hub2xvZ2llcyBJbmMuXG4gQ29weXJpZ2h0IChjKSAyMDE3LTIwMTggWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXG5cbiBodHRwOi8vd3d3LmNvY29zMmQteC5vcmdcblxuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzXG4gdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xuIGZ1cm5pc2hlZCB0byBkbyBzbywgc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgemxpYiA9IHJlcXVpcmUoJy4uL2NvbXByZXNzaW9uL3psaWIubWluJyk7XG5jb25zdCBkZWJ1ZyA9IHJlcXVpcmUoJy4uL2NvcmUvQ0NEZWJ1ZycpO1xuXG4vKipcbiAqIEEgcG5nIGZpbGUgcmVhZGVyXG4gKiBAbmFtZSBQTkdSZWFkZXJcbiAqL1xudmFyIFBOR1JlYWRlciA9IGZ1bmN0aW9uKGRhdGEpe1xuICAgIHZhciBjaHVua1NpemUsIGNvbG9ycywgZGVsYXlEZW4sIGRlbGF5TnVtLCBmcmFtZSwgaSwgaW5kZXgsIGtleSwgc2VjdGlvbiwgY2NzaG9ydCwgdGV4dCwgX2ksIF9qLCBfcmVmO1xuICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgdGhpcy5wb3MgPSA4O1xuICAgIHRoaXMucGFsZXR0ZSA9IFtdO1xuICAgIHRoaXMuaW1nRGF0YSA9IFtdO1xuICAgIHRoaXMudHJhbnNwYXJlbmN5ID0ge307XG4gICAgdGhpcy5hbmltYXRpb24gPSBudWxsO1xuICAgIHRoaXMudGV4dCA9IHt9O1xuICAgIGZyYW1lID0gbnVsbDtcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBjaHVua1NpemUgPSB0aGlzLnJlYWRVSW50MzIoKTtcbiAgICAgICAgc2VjdGlvbiA9ICgoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgX2ksIF9yZXN1bHRzO1xuICAgICAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPCA0OyBpID0gKytfaSkge1xuICAgICAgICAgICAgICAgIF9yZXN1bHRzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLmRhdGFbdGhpcy5wb3MrK10pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfcmVzdWx0cztcbiAgICAgICAgfSkuY2FsbCh0aGlzKSkuam9pbignJyk7XG4gICAgICAgIHN3aXRjaCAoc2VjdGlvbikge1xuICAgICAgICAgICAgY2FzZSAnSUhEUic6XG4gICAgICAgICAgICAgICAgdGhpcy53aWR0aCA9IHRoaXMucmVhZFVJbnQzMigpO1xuICAgICAgICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5yZWFkVUludDMyKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29sb3JUeXBlID0gdGhpcy5kYXRhW3RoaXMucG9zKytdO1xuICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3Npb25NZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgICAgICAgdGhpcy5maWx0ZXJNZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgICAgICAgdGhpcy5pbnRlcmxhY2VNZXRob2QgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhY1RMJzpcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgbnVtRnJhbWVzOiB0aGlzLnJlYWRVSW50MzIoKSxcbiAgICAgICAgICAgICAgICAgICAgbnVtUGxheXM6IHRoaXMucmVhZFVJbnQzMigpIHx8IEluZmluaXR5LFxuICAgICAgICAgICAgICAgICAgICBmcmFtZXM6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1BMVEUnOlxuICAgICAgICAgICAgICAgIHRoaXMucGFsZXR0ZSA9IHRoaXMucmVhZChjaHVua1NpemUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZmNUTCc6XG4gICAgICAgICAgICAgICAgaWYgKGZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uLmZyYW1lcy5wdXNoKGZyYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgICAgICAgICBmcmFtZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMucmVhZFVJbnQzMigpLFxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHRoaXMucmVhZFVJbnQzMigpLFxuICAgICAgICAgICAgICAgICAgICB4T2Zmc2V0OiB0aGlzLnJlYWRVSW50MzIoKSxcbiAgICAgICAgICAgICAgICAgICAgeU9mZnNldDogdGhpcy5yZWFkVUludDMyKClcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGRlbGF5TnVtID0gdGhpcy5yZWFkVUludDE2KCk7XG4gICAgICAgICAgICAgICAgZGVsYXlEZW4gPSB0aGlzLnJlYWRVSW50MTYoKSB8fCAxMDA7XG4gICAgICAgICAgICAgICAgZnJhbWUuZGVsYXkgPSAxMDAwICogZGVsYXlOdW0gLyBkZWxheURlbjtcbiAgICAgICAgICAgICAgICBmcmFtZS5kaXNwb3NlT3AgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK107XG4gICAgICAgICAgICAgICAgZnJhbWUuYmxlbmRPcCA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXTtcbiAgICAgICAgICAgICAgICBmcmFtZS5kYXRhID0gW107XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdJREFUJzpcbiAgICAgICAgICAgIGNhc2UgJ2ZkQVQnOlxuICAgICAgICAgICAgICAgIGlmIChzZWN0aW9uID09PSAnZmRBVCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgICAgICAgICAgICAgY2h1bmtTaXplIC09IDQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEgPSAoZnJhbWUgIT0gbnVsbCA/IGZyYW1lLmRhdGEgOiB2b2lkIDApIHx8IHRoaXMuaW1nRGF0YTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSBfaSA9IDA7IDAgPD0gY2h1bmtTaXplID8gX2kgPCBjaHVua1NpemUgOiBfaSA+IGNodW5rU2l6ZTsgaSA9IDAgPD0gY2h1bmtTaXplID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHRoaXMuZGF0YVt0aGlzLnBvcysrXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndFJOUyc6XG4gICAgICAgICAgICAgICAgdGhpcy50cmFuc3BhcmVuY3kgPSB7fTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuY29sb3JUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwYXJlbmN5LmluZGV4ZWQgPSB0aGlzLnJlYWQoY2h1bmtTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjc2hvcnQgPSAyNTUgLSB0aGlzLnRyYW5zcGFyZW5jeS5pbmRleGVkLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjY3Nob3J0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IF9qID0gMDsgMCA8PSBjY3Nob3J0ID8gX2ogPCBjY3Nob3J0IDogX2ogPiBjY3Nob3J0OyBpID0gMCA8PSBjY3Nob3J0ID8gKytfaiA6IC0tX2opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc3BhcmVuY3kuaW5kZXhlZC5wdXNoKDI1NSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwYXJlbmN5LmdyYXlzY2FsZSA9IHRoaXMucmVhZChjaHVua1NpemUpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudHJhbnNwYXJlbmN5LnJnYiA9IHRoaXMucmVhZChjaHVua1NpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RFWHQnOlxuICAgICAgICAgICAgICAgIHRleHQgPSB0aGlzLnJlYWQoY2h1bmtTaXplKTtcbiAgICAgICAgICAgICAgICBpbmRleCA9IHRleHQuaW5kZXhPZigwKTtcbiAgICAgICAgICAgICAgICBrZXkgPSBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZywgdGV4dC5zbGljZSgwLCBpbmRleCkpO1xuICAgICAgICAgICAgICAgIHRoaXMudGV4dFtrZXldID0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsIHRleHQuc2xpY2UoaW5kZXggKyAxKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdJRU5EJzpcbiAgICAgICAgICAgICAgICBpZiAoZnJhbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb24uZnJhbWVzLnB1c2goZnJhbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9ycyA9IChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLmNvbG9yVHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAzO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhhc0FscGhhQ2hhbm5lbCA9IChfcmVmID0gdGhpcy5jb2xvclR5cGUpID09PSA0IHx8IF9yZWYgPT09IDY7XG4gICAgICAgICAgICAgICAgY29sb3JzID0gdGhpcy5jb2xvcnMgKyAodGhpcy5oYXNBbHBoYUNoYW5uZWwgPyAxIDogMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5waXhlbEJpdGxlbmd0aCA9IHRoaXMuYml0cyAqIGNvbG9ycztcbiAgICAgICAgICAgICAgICB0aGlzLmNvbG9yU3BhY2UgPSAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5jb2xvcnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0RldmljZUdyYXknO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnRGV2aWNlUkdCJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pLmNhbGwodGhpcyk7XG4gICAgICAgICAgICAgICAgaWYoVWludDhBcnJheSAhPSBBcnJheSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWdEYXRhID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5pbWdEYXRhKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRoaXMucG9zICs9IGNodW5rU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICBpZiAodGhpcy5wb3MgPiB0aGlzLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZGVidWcuZ2V0RXJyb3IoNjAxNykpO1xuICAgICAgICB9XG4gICAgfVxufTtcblBOR1JlYWRlci5wcm90b3R5cGUgPSB7XG4gICAgY29uc3RydWN0b3I6IFBOR1JlYWRlcixcbiAgICByZWFkOmZ1bmN0aW9uKGJ5dGVzKXtcbiAgICAgICAgdmFyIGksIF9pLCBfcmVzdWx0cztcbiAgICAgICAgX3Jlc3VsdHMgPSBbXTtcbiAgICAgICAgZm9yIChpID0gX2kgPSAwOyAwIDw9IGJ5dGVzID8gX2kgPCBieXRlcyA6IF9pID4gYnl0ZXM7IGkgPSAwIDw9IGJ5dGVzID8gKytfaSA6IC0tX2kpIHtcbiAgICAgICAgICAgIF9yZXN1bHRzLnB1c2godGhpcy5kYXRhW3RoaXMucG9zKytdKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gX3Jlc3VsdHM7XG4gICAgfSxcbiAgICByZWFkVUludDMyOmZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBiMSwgYjIsIGIzLCBiNDtcbiAgICAgICAgYjEgPSB0aGlzLmRhdGFbdGhpcy5wb3MrK10gPDwgMjQ7XG4gICAgICAgIGIyID0gdGhpcy5kYXRhW3RoaXMucG9zKytdIDw8IDE2O1xuICAgICAgICBiMyA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXSA8PCA4O1xuICAgICAgICBiNCA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXTtcbiAgICAgICAgcmV0dXJuIGIxIHwgYjIgfCBiMyB8IGI0O1xuICAgIH0sXG4gICAgcmVhZFVJbnQxNjpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYjEsIGIyO1xuICAgICAgICBiMSA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXSA8PCA4O1xuICAgICAgICBiMiA9IHRoaXMuZGF0YVt0aGlzLnBvcysrXTtcbiAgICAgICAgcmV0dXJuIGIxIHwgYjI7XG4gICAgfSxcbiAgICBkZWNvZGVQaXhlbHM6ZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgIHZhciBjY2J5dGUsIGMsIGNvbCwgaSwgbGVmdCwgbGVuZ3RoLCBwLCBwYSwgcGFldGgsIHBiLCBwYywgcGl4ZWxCeXRlcywgcGl4ZWxzLCBwb3MsIHJvdywgc2NhbmxpbmVMZW5ndGgsIHVwcGVyLCB1cHBlckxlZnQsIF9pLCBfaiwgX2ssIF9sLCBfbTtcbiAgICAgICAgaWYgKGRhdGEgPT0gbnVsbCkge1xuICAgICAgICAgICAgZGF0YSA9IHRoaXMuaW1nRGF0YTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSgwKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaW5mbGF0ZSA9IG5ldyB6bGliLkluZmxhdGUoZGF0YSx7aW5kZXg6MCwgdmVyaWZ5OmZhbHNlfSk7XG4gICAgICAgIGRhdGEgPSBpbmZsYXRlLmRlY29tcHJlc3MoKTtcblxuICAgICAgICBwaXhlbEJ5dGVzID0gdGhpcy5waXhlbEJpdGxlbmd0aCAvIDg7XG4gICAgICAgIHNjYW5saW5lTGVuZ3RoID0gcGl4ZWxCeXRlcyAqIHRoaXMud2lkdGg7XG4gICAgICAgIHBpeGVscyA9IG5ldyBVaW50OEFycmF5KHNjYW5saW5lTGVuZ3RoICogdGhpcy5oZWlnaHQpO1xuICAgICAgICBsZW5ndGggPSBkYXRhLmxlbmd0aDtcbiAgICAgICAgcm93ID0gMDtcbiAgICAgICAgcG9zID0gMDtcbiAgICAgICAgYyA9IDA7XG4gICAgICAgIHdoaWxlIChwb3MgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgIHN3aXRjaCAoZGF0YVtwb3MrK10pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IF9pID0gMDsgX2kgPCBzY2FubGluZUxlbmd0aDsgaSA9IF9pICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpeGVsc1tjKytdID0gZGF0YVtwb3MrK107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBfaiA9IDA7IF9qIDwgc2NhbmxpbmVMZW5ndGg7IGkgPSBfaiArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjY2J5dGUgPSBkYXRhW3BvcysrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBpIDwgcGl4ZWxCeXRlcyA/IDAgOiBwaXhlbHNbYyAtIHBpeGVsQnl0ZXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAoY2NieXRlICsgbGVmdCkgJSAyNTY7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSBfayA9IDA7IF9rIDwgc2NhbmxpbmVMZW5ndGg7IGkgPSBfayArPSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjY2J5dGUgPSBkYXRhW3BvcysrXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbCA9IChpIC0gKGkgJSBwaXhlbEJ5dGVzKSkgLyBwaXhlbEJ5dGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXIgPSByb3cgJiYgcGl4ZWxzWyhyb3cgLSAxKSAqIHNjYW5saW5lTGVuZ3RoICsgY29sICogcGl4ZWxCeXRlcyArIChpICUgcGl4ZWxCeXRlcyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAodXBwZXIgKyBjY2J5dGUpICUgMjU2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gX2wgPSAwOyBfbCA8IHNjYW5saW5lTGVuZ3RoOyBpID0gX2wgKz0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2NieXRlID0gZGF0YVtwb3MrK107XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2wgPSAoaSAtIChpICUgcGl4ZWxCeXRlcykpIC8gcGl4ZWxCeXRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQgPSBpIDwgcGl4ZWxCeXRlcyA/IDAgOiBwaXhlbHNbYyAtIHBpeGVsQnl0ZXNdO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBwZXIgPSByb3cgJiYgcGl4ZWxzWyhyb3cgLSAxKSAqIHNjYW5saW5lTGVuZ3RoICsgY29sICogcGl4ZWxCeXRlcyArIChpICUgcGl4ZWxCeXRlcyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAoY2NieXRlICsgTWF0aC5mbG9vcigobGVmdCArIHVwcGVyKSAvIDIpKSAlIDI1NjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IF9tID0gMDsgX20gPCBzY2FubGluZUxlbmd0aDsgaSA9IF9tICs9IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNjYnl0ZSA9IGRhdGFbcG9zKytdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sID0gKGkgLSAoaSAlIHBpeGVsQnl0ZXMpKSAvIHBpeGVsQnl0ZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0ID0gaSA8IHBpeGVsQnl0ZXMgPyAwIDogcGl4ZWxzW2MgLSBwaXhlbEJ5dGVzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyb3cgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cHBlciA9IHVwcGVyTGVmdCA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyID0gcGl4ZWxzWyhyb3cgLSAxKSAqIHNjYW5saW5lTGVuZ3RoICsgY29sICogcGl4ZWxCeXRlcyArIChpICUgcGl4ZWxCeXRlcyldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwcGVyTGVmdCA9IGNvbCAmJiBwaXhlbHNbKHJvdyAtIDEpICogc2NhbmxpbmVMZW5ndGggKyAoY29sIC0gMSkgKiBwaXhlbEJ5dGVzICsgKGkgJSBwaXhlbEJ5dGVzKV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBwID0gbGVmdCArIHVwcGVyIC0gdXBwZXJMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGEgPSBNYXRoLmFicyhwIC0gbGVmdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYiA9IE1hdGguYWJzKHAgLSB1cHBlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYyA9IE1hdGguYWJzKHAgLSB1cHBlckxlZnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhIDw9IHBiICYmIHBhIDw9IHBjKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFldGggPSBsZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChwYiA8PSBwYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZXRoID0gdXBwZXI7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhZXRoID0gdXBwZXJMZWZ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGl4ZWxzW2MrK10gPSAoY2NieXRlICsgcGFldGgpICUgMjU2O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihkZWJ1Zy5nZXRFcnJvcig2MDE4LCBkYXRhW3BvcyAtIDFdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByb3crKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGl4ZWxzO1xuICAgIH0sXG4gICAgY29weVRvSW1hZ2VEYXRhOmZ1bmN0aW9uKGltYWdlRGF0YSxwaXhlbHMpe1xuICAgICAgICB2YXIgYWxwaGEsIGNvbG9ycywgZGF0YSwgaSwgaW5wdXQsIGosIGssIGxlbmd0aCwgcGFsZXR0ZSwgdiwgX3JlZjtcbiAgICAgICAgY29sb3JzID0gdGhpcy5jb2xvcnM7XG4gICAgICAgIHBhbGV0dGUgPSBudWxsO1xuICAgICAgICBhbHBoYSA9IHRoaXMuaGFzQWxwaGFDaGFubmVsO1xuICAgICAgICBpZiAodGhpcy5wYWxldHRlLmxlbmd0aCkge1xuICAgICAgICAgICAgcGFsZXR0ZSA9IChfcmVmID0gdGhpcy5fZGVjb2RlZFBhbGV0dGUpICE9IG51bGwgPyBfcmVmIDogdGhpcy5fZGVjb2RlZFBhbGV0dGUgPSB0aGlzLmRlY29kZVBhbGV0dGUoKTtcbiAgICAgICAgICAgIGNvbG9ycyA9IDQ7XG4gICAgICAgICAgICBhbHBoYSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgZGF0YSA9IGltYWdlRGF0YS5kYXRhIHx8IGltYWdlRGF0YTtcbiAgICAgICAgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG4gICAgICAgIGlucHV0ID0gcGFsZXR0ZSB8fCBwaXhlbHM7XG4gICAgICAgIGkgPSBqID0gMDtcbiAgICAgICAgaWYgKGNvbG9ycyA9PT0gMSkge1xuICAgICAgICAgICAgd2hpbGUgKGkgPCBsZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBrID0gcGFsZXR0ZSA/IHBpeGVsc1tpIC8gNF0gKiA0IDogajtcbiAgICAgICAgICAgICAgICB2ID0gaW5wdXRbaysrXTtcbiAgICAgICAgICAgICAgICBkYXRhW2krK10gPSB2O1xuICAgICAgICAgICAgICAgIGRhdGFbaSsrXSA9IHY7XG4gICAgICAgICAgICAgICAgZGF0YVtpKytdID0gdjtcbiAgICAgICAgICAgICAgICBkYXRhW2krK10gPSBhbHBoYSA/IGlucHV0W2srK10gOiAyNTU7XG4gICAgICAgICAgICAgICAgaiA9IGs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGsgPSBwYWxldHRlID8gcGl4ZWxzW2kgLyA0XSAqIDQgOiBqO1xuICAgICAgICAgICAgICAgIGRhdGFbaSsrXSA9IGlucHV0W2srK107XG4gICAgICAgICAgICAgICAgZGF0YVtpKytdID0gaW5wdXRbaysrXTtcbiAgICAgICAgICAgICAgICBkYXRhW2krK10gPSBpbnB1dFtrKytdO1xuICAgICAgICAgICAgICAgIGRhdGFbaSsrXSA9IGFscGhhID8gaW5wdXRbaysrXSA6IDI1NTtcbiAgICAgICAgICAgICAgICBqID0gaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgZGVjb2RlUGFsZXR0ZTpmdW5jdGlvbigpe1xuICAgICAgICB2YXIgYywgaSwgcGFsZXR0ZSwgcG9zLCByZXQsIHRyYW5zcGFyZW5jeSwgX2ksIF9yZWYsIF9yZWYxO1xuICAgICAgICBwYWxldHRlID0gdGhpcy5wYWxldHRlO1xuICAgICAgICB0cmFuc3BhcmVuY3kgPSB0aGlzLnRyYW5zcGFyZW5jeS5pbmRleGVkIHx8IFtdO1xuICAgICAgICByZXQgPSBuZXcgVWludDhBcnJheSgodHJhbnNwYXJlbmN5Lmxlbmd0aCB8fCAwKSArIHBhbGV0dGUubGVuZ3RoKTtcbiAgICAgICAgcG9zID0gMDtcbiAgICAgICAgYyA9IDA7XG4gICAgICAgIGZvciAoaSA9IF9pID0gMCwgX3JlZiA9IHBhbGV0dGUubGVuZ3RoOyBfaSA8IF9yZWY7IGkgPSBfaSArPSAzKSB7XG4gICAgICAgICAgICByZXRbcG9zKytdID0gcGFsZXR0ZVtpXTtcbiAgICAgICAgICAgIHJldFtwb3MrK10gPSBwYWxldHRlW2kgKyAxXTtcbiAgICAgICAgICAgIHJldFtwb3MrK10gPSBwYWxldHRlW2kgKyAyXTtcbiAgICAgICAgICAgIHJldFtwb3MrK10gPSAoX3JlZjEgPSB0cmFuc3BhcmVuY3lbYysrXSkgIT0gbnVsbCA/IF9yZWYxIDogMjU1O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcbiAgICByZW5kZXI6IGZ1bmN0aW9uIChjYW52YXMpIHtcbiAgICAgICAgdmFyIGN0eCwgZGF0YTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgICBjdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuICAgICAgICBkYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIHRoaXMuY29weVRvSW1hZ2VEYXRhKGRhdGEsIHRoaXMuZGVjb2RlUGl4ZWxzKCkpO1xuICAgICAgICByZXR1cm4gY3R4LnB1dEltYWdlRGF0YShkYXRhLCAwLCAwKTtcblxuICAgIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUE5HUmVhZGVyOyJdfQ==